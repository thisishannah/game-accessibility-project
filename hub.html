<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ì¸¡ì • í•­ëª© í—ˆë¸Œ Â· ê²Œì„ ì ‘ê·¼ì„±</title>
    <link rel="stylesheet" href="style.css">
    <style>
      :root {
        --bg: #050816;
        --accent: #7c3aed;
        --accent-soft: rgba(124, 58, 237, 0.15);
        --accent-strong: rgba(124, 58, 237, 0.35);
        --border-subtle: rgba(148, 163, 184, 0.4);
        --text-main: #e5e7eb;
        --text-muted: #b8c5d6;
        --danger: #f97373;
        --radius-lg: 18px;
        --radius-md: 12px;
        --radius-pill: 999px;
        --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.9);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        color: var(--text-main);
        background: radial-gradient(circle at top, #111827 0, #020617 50%);
        display: flex;
        align-items: stretch;
        justify-content: center;
        padding: 32px 16px;
      }

      .shell {
        width: 100%;
        max-width: 1120px;
        background: radial-gradient(circle at top left, #020617 0, #020617 35%),
          radial-gradient(circle at top right, #111827 0, #020617 55%);
        border-radius: 26px;
        border: 1px solid rgba(148, 163, 184, 0.85);
        box-shadow: var(--shadow-soft);
        padding: 22px 24px 24px;
        display: grid;
        grid-template-columns: minmax(0, 1.15fr) minmax(0, 0.9fr);
        gap: 24px;
        position: relative;
        overflow: hidden;
      }

      @media (max-width: 900px) {
        body {
          padding: 16px 10px;
        }
        .shell {
          grid-template-columns: minmax(0, 1fr);
          padding: 18px 16px 20px;
          border-radius: 20px;
        }
      }

      .shell::before {
        content: "";
        position: absolute;
        inset: -35%;
        background:
          radial-gradient(circle at 0% 0%, rgba(56, 189, 248, 0.24) 0, transparent 55%),
          radial-gradient(circle at 100% 0%, rgba(129, 140, 248, 0.26) 0, transparent 55%),
          radial-gradient(circle at 50% 120%, rgba(244, 114, 182, 0.18) 0, transparent 58%);
        opacity: 0.9;
        mix-blend-mode: soft-light;
        pointer-events: none;
      }

      .shell-inner {
        position: relative;
        z-index: 1;
        display: contents;
      }

      .header {
        grid-column: 1 / -1;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        margin-bottom: 12px;
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .brand-logo {
        width: 34px;
        height: 34px;
        border-radius: 18px;
        background:
          conic-gradient(from 200deg, #7c3aed, #22d3ee, #f97316, #7c3aed);
        padding: 3px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9),
          0 12px 26px rgba(15, 23, 42, 0.9);
      }

      .brand-logo-inner {
        width: 100%;
        height: 100%;
        border-radius: 14px;
        background: radial-gradient(circle at 30% 15%, #e5e7eb, #e5e7eb 4%, #020617 68%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #020617;
        font-size: 15px;
        font-weight: 800;
      }

      .brand-text-main {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .brand-text-main span:first-child {
        font-size: 13px;
        color: var(--text-muted);
        font-weight: 500;
      }

      .brand-text-main span:last-child {
        font-size: 17px;
        font-weight: 650;
        letter-spacing: 0.01em;
      }

      .header-meta {
        text-align: right;
        font-size: 11px;
        color: var(--text-muted);
      }

      .header-meta strong {
        color: #e5e7eb;
        font-weight: 600;
      }

      @media (max-width: 900px) {
        .header {
          flex-direction: column;
          align-items: flex-start;
        }
        .header-meta {
          text-align: left;
        }
      }

      .section-title {
        font-size: 15px;
        font-weight: 600;
        margin-bottom: 4px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .section-title-pill {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.14em;
        color: var(--text-muted);
        border-radius: var(--radius-pill);
        border: 1px solid rgba(148, 163, 184, 0.6);
        padding: 2px 9px;
        background: radial-gradient(circle at top, rgba(15, 23, 42, 0.92), #020617);
      }

      .section-subtitle {
        font-size: 14px;
        font-weight: 500;
        color: var(--text-secondary);
        margin-bottom: 16px;
      }

      .hub-left {
        background: radial-gradient(circle at top left, #020617 0, #020617 55%),
          radial-gradient(circle at bottom right, #020617 0, #020617 60%);
        border-radius: var(--radius-lg);
        border: 1px solid rgba(51, 65, 85, 0.9);
        padding: 16px 16px 18px;
        position: relative;
        overflow: hidden;
      }

      .hub-left::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at top, rgba(148, 163, 184, 0.22), transparent 55%);
        opacity: 0.25;
        pointer-events: none;
      }

      .hub-left-inner {
        position: relative;
        z-index: 1;
      }

      .measure-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 10px;
      }

      @media (max-width: 640px) {
        .measure-grid {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      .measure-card {
        position: relative;
        border-radius: var(--radius-lg);
        border: 1px solid rgba(148, 163, 184, 0.45);
        background: rgba(15, 23, 42, 0.75);
        backdrop-filter: var(--glass-blur);
        -webkit-backdrop-filter: var(--glass-blur);
        padding: var(--spacing-md);
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm);
        cursor: pointer;
        transition: all var(--transition-base);
        opacity: 0.9;
        min-height: 48px;
      }

      .measure-card[data-primary="true"] {
        opacity: 1;
        border: 2px solid rgba(129, 140, 248, 0.9);
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.25) 0%, rgba(124, 58, 237, 0.2) 50%, rgba(15, 23, 42, 0.9) 100%);
        box-shadow: 0 0 0 1px rgba(129, 140, 248, 0.4),
          inset 0 1px 0 rgba(255, 255, 255, 0.06),
          0 16px 36px rgba(15, 23, 42, 0.8);
      }

      .measure-card[data-primary="true"]::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        background: radial-gradient(circle at 30% 20%, rgba(129, 140, 248, 0.2), transparent 55%);
        pointer-events: none;
      }

      .measure-card[data-primary="true"] .measure-title {
        color: #e0e7ff;
      }

      .measure-card[data-primary="true"] .measure-sub {
        color: rgba(203, 213, 225, 0.9);
      }

      .measure-card:hover {
        transform: translateY(-4px);
        border-color: var(--border-medium);
        box-shadow: var(--shadow-lg);
        opacity: 1;
      }

      .measure-card:focus-visible {
        outline: 2px solid var(--accent-primary);
        outline-offset: 2px;
        box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.3);
      }

      .measure-card[data-primary="true"]:hover {
        transform: translateY(-4px);
        border-color: rgba(129, 140, 248, 1);
        box-shadow: var(--shadow-lg), 0 0 24px rgba(99, 102, 241, 0.25);
      }

      .measure-head {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 6px;
      }

      .measure-main {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .measure-icon {
        width: 26px;
        height: 26px;
        border-radius: 999px;
        background: radial-gradient(circle at 25% 0%, #e5e7eb, #020617 70%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 15px;
        box-shadow: 0 10px 18px rgba(15, 23, 42, 0.85);
      }

      .measure-text {
        display: flex;
        flex-direction: column;
        gap: 1px;
      }

      .measure-title {
        font-size: 13px;
        font-weight: 600;
      }

      .measure-sub {
        font-size: 11px;
        color: rgba(203, 213, 225, 0.92);
      }

      .measure-progress {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        gap: 6px;
        font-size: 11px;
        margin-top: 2px;
      }

      .measure-progress-label {
        color: rgba(203, 213, 225, 0.9);
      }

      .measure-progress-value {
        font-variant-numeric: tabular-nums;
        font-weight: 550;
      }

      .measure-progress-bar {
        position: relative;
        width: 100%;
        height: 8px;
        border-radius: var(--radius-pill);
        background: rgba(148, 163, 184, 0.2);
        overflow: hidden;
        margin-top: 8px;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3);
      }

      .measure-progress-fill {
        position: absolute;
        inset: 0;
        transform-origin: left center;
        transform: scaleX(0);
        background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 0 10px rgba(124, 58, 237, 0.5);
      }

      .measure-card[data-complete="true"] .measure-progress-fill {
        background: linear-gradient(90deg, var(--success), #22c55e);
        box-shadow: 0 0 10px rgba(74, 222, 128, 0.5);
      }

      .hub-right {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .right-panel {
        background: radial-gradient(circle at top left, #020617 0, #020617 55%),
          radial-gradient(circle at bottom right, #020617 0, #020617 60%);
        border-radius: var(--radius-lg);
        border: 1px solid rgba(51, 65, 85, 0.9);
        padding: 15px 15px 16px;
      }

      .right-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        margin-bottom: 6px;
      }

      .right-title {
        font-size: 14px;
        font-weight: 550;
      }

      .right-badge {
        font-size: 11px;
        color: rgba(209, 213, 219, 0.95);
        border-radius: var(--radius-pill);
        padding: 3px 9px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        background: radial-gradient(circle at top, #020617, #020617 65%);
      }

      .right-body {
        font-size: 12px;
        color: var(--text-muted);
        line-height: 1.5;
      }

      .right-body ul {
        margin: 8px 0 0;
        padding-left: 18px;
      }

      .right-body li {
        margin-bottom: 4px;
      }

      .pill-row {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 10px;
      }

      .pill {
        font-size: 10px;
        border-radius: var(--radius-pill);
        padding: 3px 8px;
        border: 1px solid rgba(148, 163, 184, 0.6);
        color: rgba(209, 213, 219, 0.95);
        background: radial-gradient(circle at top, #020617, #020617 65%);
      }

      .pill-accent {
        border-color: rgba(129, 140, 248, 0.95);
      }

      .summary-card {
        margin-top: 4px;
        font-size: 11px;
        color: var(--text-muted);
      }

      .summary-pill {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        border-radius: var(--radius-pill);
        border: 1px solid rgba(148, 163, 184, 0.8);
        padding: 3px 8px;
        background: radial-gradient(circle at top, rgba(15, 23, 42, 0.9), #020617);
        font-size: 11px;
        margin-top: 4px;
      }

      .footer {
        margin-top: 8px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        flex-wrap: wrap;
      }

      .footer-hint {
        font-size: 11px;
        color: var(--text-muted);
      }

      .footer-hint strong {
        color: #e5e7eb;
        font-weight: 600;
      }

      .btn-primary,
      button      .btn-primary {
        border-radius: var(--radius-pill);
        padding: 12px 24px;
        min-height: 48px;
        border: none;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        font-weight: 600;
        color: white;
        background: linear-gradient(120deg, #4f46e5, #7c3aed, #f97316);
        background-size: 200% 100%;
        box-shadow: 0 14px 30px rgba(15, 23, 42, 1);
        transition: all var(--transition-base);
      }

      .btn-primary:focus-visible {
        outline: 2px solid var(--accent-primary);
        outline-offset: 2px;
        box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.3), 0 14px 30px rgba(15, 23, 42, 1);
      }

      .btn-primary[disabled] {
        opacity: 0.45;
        cursor: not-allowed;
        box-shadow: none;
      }

      .btn-primary:not([disabled]):hover {
        transform: translateY(-2px);
        filter: brightness(1.1);
        background-position: 100% 0;
        box-shadow: 0 20px 40px rgba(15, 23, 42, 1), 0 0 20px rgba(124, 58, 237, 0.4);
      }

      .btn-primary:not([disabled]):active {
        transform: translateY(0);
        box-shadow: 0 10px 22px rgba(15, 23, 42, 0.95);
      }

      .btn-primary-icon {
        width: 18px;
        height: 18px;
        border-radius: 999px;
        background: radial-gradient(circle at 25% 0%, #e5e7eb, #020617 65%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 11px;
      }

      .btn-primary-sub {
        font-size: 11px;
        opacity: 0.9;
        font-weight: 500;
      }

      .status-text {
        font-size: 11px;
        margin-top: 4px;
      }

      .status-text--error {
        color: var(--danger);
      }

      .status-text--ok {
        color: #4ade80;
      }

      .screen-reader-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        border: 0;
      }
    </style>
  </head>
  <body>
    <main class="shell" aria-labelledby="hub-title">
      <div class="shell-inner">
        <header class="header">
          <div class="brand" aria-label="ê²Œì„ ì ‘ê·¼ì„± ì¸¡ì • í—ˆë¸Œ">
            <div class="brand-logo" aria-hidden="true">
              <div class="brand-logo-inner">GA</div>
            </div>
            <div class="brand-text-main">
              <span>ê²Œì„ ì ‘ê·¼ì„± ì¸¡ì •</span>
              <span id="hub-title">ì¸¡ì • í•­ëª© í—ˆë¸Œ</span>
            </div>
          </div>
          <div class="header-meta" id="user-summary">
            ì„¸ì…˜ ì •ë³´ ë¡œë”© ì¤‘...
          </div>
        </header>

        <section class="hub-left" aria-label="ì¸¡ì • í•­ëª© ì„ íƒ">
          <div class="hub-left-inner">
            <div class="section-title">
              <span>ì¥ì•  ìœ í˜•ë³„ ì¸¡ì • í—ˆë¸Œ</span>
              <span class="section-title-pill">Step Â· Measures Hub</span>
            </div>
            <p class="section-subtitle" id="hub-subtitle">
              ì„¸ì…˜ì—ì„œ ì„ íƒí•œ ì¥ì•  ìœ í˜•ì— ë”°ë¼ ê¶Œì¥ ì¸¡ì • í•­ëª©ì´ ê°•ì¡°ë©ë‹ˆë‹¤. ë‹¤ë¥¸ ì¥ì• 
              ì˜ì—­ì€ í•„ìš” ì‹œ ì°¸ê³ ìš©ìœ¼ë¡œë§Œ ì§„í–‰í•´ë„ ë©ë‹ˆë‹¤.
            </p>

            <div class="measure-grid" id="measure-grid">
              <!-- ì‹œê° ì¸¡ì • -->
              <article
                class="measure-card"
                data-measure="visual"
                data-disability-type="ì‹œê°"
                tabindex="0"
              >
                <div class="measure-head">
                  <div class="measure-main">
                    <div class="measure-icon" aria-hidden="true">ğŸ‘ï¸</div>
                    <div class="measure-text">
                      <div class="measure-title">ì‹œê° ì¸¡ì •</div>
                      <div class="measure-sub">
                        ëŒ€ë¹„, ìƒ‰ ì˜ì¡´ë„, í…ìŠ¤íŠ¸/ì•„ì´ì½˜ ê°€ë…ì„±
                      </div>
                    </div>
                  </div>
                </div>
                <div class="measure-progress">
                  <span
                    class="measure-progress-label"
                    data-progress-label="visual"
                  >
                    UI & í…ìŠ¤íŠ¸ ê°€ì‹œì„±
                  </span>
                  <span
                    class="measure-progress-value"
                    data-progress-value="visual"
                  >
                    0/4
                  </span>
                </div>
                <div class="measure-progress-bar" aria-hidden="true">
                  <div
                    class="measure-progress-fill"
                    data-progress-fill="visual"
                    style="transform: scaleX(0)"
                  ></div>
                </div>
              </article>

              <!-- ìš´ë™ ì¸¡ì • -->
              <article
                class="measure-card"
                data-measure="motor"
                data-disability-type="ìš´ë™"
                tabindex="0"
              >
                <div class="measure-head">
                  <div class="measure-main">
                    <div class="measure-icon" aria-hidden="true">ğŸ®</div>
                    <div class="measure-text">
                      <div class="measure-title">ìš´ë™ ì¸¡ì •</div>
                      <div class="measure-sub">
                        ì…ë ¥ ë‚œì´ë„, ë™ì‹œ ì…ë ¥, ë°˜ë³µ ì¡°ì‘ í”¼ë¡œë„
                      </div>
                    </div>
                  </div>
                </div>
                <div class="measure-progress">
                  <span
                    class="measure-progress-label"
                    data-progress-label="motor"
                  >
                    FOV & ì…ë ¥ ë™ì‹œì„±
                  </span>
                  <span
                    class="measure-progress-value"
                    data-progress-value="motor"
                  >
                    0/4
                  </span>
                </div>
                <div class="measure-progress-bar" aria-hidden="true">
                  <div
                    class="measure-progress-fill"
                    data-progress-fill="motor"
                    style="transform: scaleX(0)"
                  ></div>
                </div>
              </article>

              <!-- ì²­ê°ì–¸ì–´ì¥ì•  ì¸¡ì • -->
              <article
                class="measure-card"
                data-measure="audio"
                data-disability-type="ì²­ê°ì–¸ì–´ì¥ì• "
                tabindex="0"
              >
                <div class="measure-head">
                  <div class="measure-main">
                    <div class="measure-icon" aria-hidden="true">ğŸ”Š</div>
                    <div class="measure-text">
                      <div class="measure-title">ì²­ê°ì–¸ì–´ì¥ì•  ì¸¡ì •</div>
                      <div class="measure-sub">
                        ìë§‰Â·ì‹œê°ì  í”¼ë“œë°±, ì†Œë¦¬ ì˜ì¡´ë„, ë¯¹ì‹±
                      </div>
                    </div>
                  </div>
                </div>
                <div class="measure-progress">
                  <span
                    class="measure-progress-label"
                    data-progress-label="audio"
                  >
                    ìë§‰Â·ì•Œë¦¼ í”¼ë“œë°±
                  </span>
                  <span
                    class="measure-progress-value"
                    data-progress-value="audio"
                  >
                    0/3
                  </span>
                </div>
                <div class="measure-progress-bar" aria-hidden="true">
                  <div
                    class="measure-progress-fill"
                    data-progress-fill="audio"
                    style="transform: scaleX(0)"
                  ></div>
                </div>
              </article>

              <!-- ì¸ì§€ ì¸¡ì • -->
              <article
                class="measure-card"
                data-measure="cognitive"
                data-disability-type="ì¸ì§€"
                tabindex="0"
              >
                <div class="measure-head">
                  <div class="measure-main">
                    <div class="measure-icon" aria-hidden="true">ğŸ§ </div>
                    <div class="measure-text">
                      <div class="measure-title">ì¸ì§€ ì¸¡ì •</div>
                      <div class="measure-sub">
                        ì •ë³´ëŸ‰, íŠœí† ë¦¬ì–¼, UI ë³µì¡ë„, íƒ€ì´ë° ë¶€ë‹´
                      </div>
                    </div>
                  </div>
                </div>
                <div class="measure-progress">
                  <span
                    class="measure-progress-label"
                    data-progress-label="cognitive"
                  >
                    ì •ë³´ ì²˜ë¦¬ ë‚œì´ë„
                  </span>
                  <span
                    class="measure-progress-value"
                    data-progress-value="cognitive"
                  >
                    0/3
                  </span>
                </div>
                <div class="measure-progress-bar" aria-hidden="true">
                  <div
                    class="measure-progress-fill"
                    data-progress-fill="cognitive"
                    style="transform: scaleX(0)"
                  ></div>
                </div>
              </article>
            </div>
          </div>
        </section>

        <aside class="hub-right" aria-label="ì„¸ì…˜ ê°œìš” ë° ì§„í–‰ ìƒí™©">
          <section class="right-panel">
            <div class="right-header">
              <div class="right-title">ì„¸ì…˜ ê°œìš”</div>
              <span class="right-badge" id="primary-disability-badge">
                ì¥ì•  ìœ í˜•: -
              </span>
            </div>
            <div class="right-body">
              <p id="hub-helper-text">
                ì„¸ì…˜ì—ì„œ ì„ íƒí•œ ì¥ì•  ìœ í˜•ì— í•´ë‹¹í•˜ëŠ” ì¸¡ì • ì˜ì—­ì´ ìë™ìœ¼ë¡œ ê°•ì¡°ë©ë‹ˆë‹¤.
                ê°•ì¡°ëœ ì¹´ë“œê°€ ì´ ì„¸ì…˜ì˜ <strong>í•„ìˆ˜ ì¸¡ì • í•­ëª©</strong>ì…ë‹ˆë‹¤.
              </p>
              <ul>
                <li>
                  ê°•ì¡° ì¹´ë“œ: ì´ ì„¸ì…˜ì˜ ì£¼ìš” ë¶„ì„ ì¶•ìœ¼ë¡œ, ìµœì†Œ 1íšŒ ì´ìƒ ì¸¡ì • í•„ìš”
                </li>
                <li>
                  ë°˜íˆ¬ëª… ì¹´ë“œ: ë‹¤ë¥¸ ì¥ì•  ìœ í˜• ì¸¡ì • â€“ í•„ìš” ì‹œë§Œ ì„ íƒì ìœ¼ë¡œ ì§„í–‰
                </li>
                <li>
                  ê° ì¹´ë“œì˜ ì§„í–‰ë¥ (ì˜ˆ: FOV ì¸¡ì • 0/4)ì€ ê°œë³„ ì¸¡ì • í˜ì´ì§€ë¥¼ ë‹¤ë…€ì˜¬ ë•Œë§ˆë‹¤
                  ìë™ìœ¼ë¡œ ê°±ì‹ ë©ë‹ˆë‹¤.
                </li>
              </ul>

              <div class="pill-row">
                <span class="pill pill-accent">ì„¸ì…˜ ê¸°ë°˜ ì¸¡ì • í—ˆë¸Œ</span>
                <span class="pill">ìœ í˜•ë³„ ì¸¡ì • ëª¨ë“ˆ</span>
                <span class="pill">ì§„í–‰ë¥  ì¶”ì </span>
                <span class="pill">ìµœì¢… ë¦¬í¬íŠ¸ ì—°ë™</span>
              </div>

              <div class="summary-card">
                <div>í˜„ì¬ ì„¸ì…˜</div>
                <div id="session-summary-pill" class="summary-pill">
                  <span>ID</span>
                  <span id="session-id-text">-</span>
                  <span style="opacity: 0.6; margin-left: 4px">Â·</span>
                  <span>ì¥ì• </span>
                  <span id="session-disability-text">-</span>
                </div>
              </div>
            </div>
          </section>

          <section class="right-panel" aria-label="ìµœì¢… ê²°ê³¼ ì „ì†¡">
            <div class="right-header">
              <div class="right-title">ìµœì¢… ê²°ê³¼</div>
              <span class="right-badge" id="completion-badge">Required: 0/1</span>
            </div>
            <div class="right-body">
              <p>
                í•„ìˆ˜ ì¸¡ì •(ì„¸ì…˜ì—ì„œ ì„ íƒí•œ ì£¼ìš” ì¥ì•  ìœ í˜•)ì´ ì™„ë£Œë˜ë©´ ì•„ë˜ ë²„íŠ¼ì´
                í™œì„±í™”ë©ë‹ˆë‹¤. ì´ ë²„íŠ¼ì„ í†µí•´ ì¸¡ì • ìš”ì•½ê³¼ í•¨ê»˜ ìµœì¢… ê²°ê³¼ë¥¼ ë‚´ë³´ë‚´ê±°ë‚˜
                ì—°êµ¬ìš© ì €ì¥ í”„ë¡œì„¸ìŠ¤ë¡œ ë„˜ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
              </p>
              <p class="status-text" id="completion-status-text">
                í•„ìˆ˜ ì¸¡ì • ì§„í–‰ë¥ ì„ í™•ì¸í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤.
              </p>
            </div>
            <div class="footer">
              <p class="footer-hint" id="footer-hint">
                <strong>í•„ìˆ˜ ì¸¡ì •</strong>ì„ ìµœì†Œ 1íšŒ ì´ìƒ ì™„ë£Œí•˜ë©´ ìµœì¢… ê²°ê³¼ ë²„íŠ¼ì´
                í™œì„±í™”ë©ë‹ˆë‹¤.
              </p>
              <button
                type="button"
                class="btn-primary"
                id="final-submit-button"
                disabled
              >
                <span class="btn-primary-icon" aria-hidden="true">âœ”</span>
                <span>ìµœì¢… ê²°ê³¼ í™•ì¸ ë° ì „ì†¡</span>
                <span class="btn-primary-sub">Review & Export</span>
              </button>
            </div>
          </section>
        </aside>
      </div>
    </main>

    <script src="ga-storage.js"></script>
    <script>
      (function () {
        const userSummaryEl = document.getElementById("user-summary");
        const sessionIdText = document.getElementById("session-id-text");
        const sessionDisabilityText = document.getElementById(
          "session-disability-text"
        );
        const primaryDisabilityBadge = document.getElementById(
          "primary-disability-badge"
        );
        const hubSubtitle = document.getElementById("hub-subtitle");
        const hubHelperText = document.getElementById("hub-helper-text");
        const completionBadge = document.getElementById("completion-badge");
        const completionStatusText = document.getElementById(
          "completion-status-text"
        );
        const footerHint = document.getElementById("footer-hint");
        const finalSubmitButton = document.getElementById(
          "final-submit-button"
        );

        const measureGrid = document.getElementById("measure-grid");

        const PROGRESS_DEFAULTS = {
          visual: { label: "ë°˜ì‘ì†ë„ + í°íŠ¸ + ì—ì„ + FOV", current: 0, total: 4 },
          motor: { label: "9ê°œ í…ŒìŠ¤íŠ¸", current: 0, total: 9 },
          audio: { label: "ìë§‰Â·ì•Œë¦¼ í”¼ë“œë°±", current: 0, total: 3 },
          cognitive: { label: "4ê°œ í…ŒìŠ¤íŠ¸", current: 0, total: 4 },
        };

        function readSession() {
          return (typeof GAStorage !== "undefined" && GAStorage.readSession()) || {};
        }

        function readProgress(key) {
          return (typeof GAStorage !== "undefined" && GAStorage.readProgress(key)) || null;
        }

        function escapeHtml(str) {
          return String(str)
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&#039;");
        }

        function mapDisabilityToKey(type) {
          switch (type) {
            case "ì‹œê°":
              return "visual";
            case "ìš´ë™":
              return "motor";
            case "ì²­ê°ì–¸ì–´ì¥ì• ":
              return "audio";
            case "ì¸ì§€":
              return "cognitive";
            default:
              return null;
          }
        }

        function updateUserSummary(session) {
          const id = session.userId || session.id || "-";
          const types = session.disabilityTypes && session.disabilityTypes.length > 0
            ? session.disabilityTypes
            : (session.disabilityType ? [session.disabilityType] : []);
          const disability = types.length > 0 ? types.join(", ") : "-";

          sessionIdText.textContent = id || "-";
          sessionDisabilityText.textContent = disability || "-";

          if (types.length === 0) {
            userSummaryEl.innerHTML =
              "ì„¸ì…˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ë©”ì¸ í˜ì´ì§€ì—ì„œ ì„¸ì…˜ì„ ìƒì„±í•œ ë’¤ ë‹¤ì‹œ ì´ í˜ì´ì§€ë¥¼ ì—¬ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.";
          } else {
            userSummaryEl.innerHTML =
              'ì„¸ì…˜ <strong>' +
              escapeHtml(id || "unnamed") +
              "</strong> Â· ì¥ì•  ìœ í˜• <strong>" +
              escapeHtml(disability) +
              "</strong>";
          }

          const primaryKeys = types.map(mapDisabilityToKey).filter(Boolean);
          if (primaryKeys.length > 0) {
            primaryDisabilityBadge.textContent =
              "ì¥ì•  ìœ í˜•: " + (types.length > 1 ? types.length + "ê°œ ì„ íƒ" : types[0]);
            hubSubtitle.textContent =
              "ì„¸ì…˜ì—ì„œ ì„ íƒí•œ ì¥ì•  ìœ í˜•ì— ë§ì¶° í•´ë‹¹ ì¸¡ì • í•­ëª©ì„ í•„ìˆ˜ë¡œ ê°•ì¡°í•©ë‹ˆë‹¤.";
            hubHelperText.innerHTML =
              types.length > 1
                ? "ì„ íƒí•œ <strong>" + escapeHtml(types.join(", ")) + "</strong>ì— í•´ë‹¹í•˜ëŠ” ì¹´ë“œê°€ ëª¨ë‘ í•„ìˆ˜ ì¸¡ì •ì…ë‹ˆë‹¤. ê°ê° ì™„ë£Œ í›„ ìµœì¢… ì „ì†¡ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤."
                : "í˜„ì¬ ì„¸ì…˜ì˜ ì£¼ìš” ì¥ì•  ìœ í˜•ì€ <strong>" + escapeHtml(types[0]) + "</strong>ì…ë‹ˆë‹¤. ì´ ìœ í˜•ì— í•´ë‹¹í•˜ëŠ” ì¹´ë“œê°€ í•„ìˆ˜ ì¸¡ì •ìœ¼ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.";
          } else {
            primaryDisabilityBadge.textContent = "ì¥ì•  ìœ í˜•: -";
          }

          const cards = measureGrid.querySelectorAll(".measure-card");
          cards.forEach((card) => {
            const cardType = card.getAttribute("data-disability-type");
            card.dataset.primary = cardType && types.indexOf(cardType) !== -1 ? "true" : "false";
          });

          return primaryKeys;
        }

        function updateProgressUI() {
          const keys = Object.keys(PROGRESS_DEFAULTS);
          const completion = {};

          keys.forEach((key) => {
            const domLabel = document.querySelector(
              '[data-progress-label="' + key + '"]'
            );
            const domValue = document.querySelector(
              '[data-progress-value="' + key + '"]'
            );
            const domFill = document.querySelector(
              '[data-progress-fill="' + key + '"]'
            );

            if (!domLabel || !domValue || !domFill) return;

            const stored = readProgress(key);
            const base = PROGRESS_DEFAULTS[key];
            const label = (stored && stored.label) || base.label;
            const current =
              typeof stored?.current === "number"
                ? stored.current
                : base.current;
            const total =
              typeof stored?.total === "number" ? stored.total : base.total;

            domLabel.textContent = label;
            domValue.textContent = current + "/" + total;

            const ratio = total > 0 ? Math.max(0, Math.min(1, current / total)) : 0;
            domFill.style.transform = "scaleX(" + ratio + ")";

            completion[key] = {
              current,
              total,
              complete: total > 0 && current >= total,
            };

            const card = document.querySelector(
              '.measure-card[data-measure="' + key + '"]'
            );
            if (card) {
              card.dataset.complete = completion[key].complete ? "true" : "false";
            }
          });

          return completion;
        }

        function updateCompletion(primaryKeys, completion) {
          if (!primaryKeys || primaryKeys.length === 0) {
            completionBadge.textContent = "Required: 0/0";
            completionStatusText.textContent =
              "ì„¸ì…˜ì˜ ì¥ì•  ìœ í˜• ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë©”ì¸ ëŒ€ì‹œë³´ë“œì—ì„œ ì„¸ì…˜ì„ ë¨¼ì € ìƒì„±í•´ ì£¼ì„¸ìš”.";
            completionStatusText.className = "status-text status-text--error";
            finalSubmitButton.disabled = true;
            footerHint.textContent =
              "ì„¸ì…˜ ì •ë³´ê°€ ì—†ê±°ë‚˜ ì£¼ìš” ì¥ì•  ìœ í˜•ì´ ì§€ì •ë˜ì§€ ì•Šì€ ìƒíƒœì…ë‹ˆë‹¤.";
            return;
          }

          let completedCount = 0;
          let totalRequired = primaryKeys.length;
          primaryKeys.forEach(function (key) {
            const info = completion[key];
            if (info && info.total > 0 && info.current >= info.total) completedCount++;
          });
          const isComplete = completedCount >= totalRequired;

          completionBadge.textContent = "Required: " + completedCount + "/" + totalRequired;

          if (isComplete) {
            completionStatusText.textContent =
              "í•„ìˆ˜ ì¸¡ì •ì´ ëª¨ë‘ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ìµœì¢… ê²°ê³¼ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë¦¬í¬íŠ¸ë¥¼ í™•ì¸í•˜ê³  ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            completionStatusText.className = "status-text status-text--ok";
            finalSubmitButton.disabled = false;
            footerHint.innerHTML =
              "<strong>í•„ìˆ˜ ì¸¡ì •</strong>ì´ ëª¨ë‘ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. í•„ìš”í•˜ë‹¤ë©´ ì„ íƒ ì¸¡ì •ì„ ì¶”ê°€ë¡œ ì§„í–‰í•œ ë’¤ ê²°ê³¼ë¥¼ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
          } else {
            completionStatusText.textContent =
              "í•„ìˆ˜ ì¸¡ì •ì´ ì•„ì§ ì™„ë£Œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê°•ì¡°ëœ ì¹´ë“œ(" + (totalRequired - completedCount) + "ê°œ ë‚¨ìŒ)ì˜ ì§„í–‰ë¥ ì„ ëª¨ë‘ ì±„ìš´ ë’¤ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.";
            completionStatusText.className = "status-text status-text--error";
            finalSubmitButton.disabled = true;
            footerHint.innerHTML =
              "ì„ íƒí•œ ì¥ì•  ìœ í˜•ì— í•´ë‹¹í•˜ëŠ” <strong>ëª¨ë“  í•„ìˆ˜ ì¸¡ì •</strong> ì¹´ë“œë¥¼ ì™„ë£Œí•´ì•¼ ìµœì¢… ê²°ê³¼ ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤.";
          }
        }

        function initNavigation(primaryKeys) {
          measureGrid.addEventListener("click", (event) => {
            const card = event.target.closest(".measure-card");
            if (!card) return;
            const key = card.getAttribute("data-measure");
            if (!key) return;

            // ê° ì¸¡ì • í˜ì´ì§€ URL ë§¤í•‘
            const urlByKey = {
              visual: "vision_hub.html",
              motor: "motor_hub.html",
              audio: "hearing_hub.html",
              cognitive: "cognitive_hub.html",
            };

            const target = urlByKey[key];
            if (target) {
              window.location.href = target;
            } else {
              alert(
                "[" +
                  (card.querySelector(".measure-title")?.textContent || key) +
                  "] ì¸¡ì • í˜ì´ì§€ URLì´ ì•„ì§ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."
              );
            }
          });

          measureGrid.addEventListener("keydown", (event) => {
            if (event.key === "Enter" || event.key === " ") {
              const card = event.target.closest(".measure-card");
              if (!card) return;
              event.preventDefault();
              card.click();
            }
          });

          finalSubmitButton.addEventListener("click", () => {
            window.location.href = "summary.html";
          });
        }

        const session = readSession();
        const primaryKeys = updateUserSummary(session);
        const completion = updateProgressUI();
        updateCompletion(primaryKeys, completion);
        initNavigation(primaryKeys);
      })();
    </script>
  </body>
</html>

