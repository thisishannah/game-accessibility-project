<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ê²Œì„ ì ‘ê·¼ì„± í‰ê°€ ëŒ€ì‹œë³´ë“œ</title>
    <link rel="stylesheet" href="style.css">
    <style>
      :root {
        --bg: #050816;
        --bg-elevated: #0b1020;
        --accent: #7c3aed;
        --accent-soft: rgba(124, 58, 237, 0.12);
        --accent-strong: rgba(124, 58, 237, 0.3);
        --border-subtle: rgba(148, 163, 184, 0.4);
        --text-main: #e5e7eb;
        --text-muted: #b8c5d6;
        --danger: #f97373;
        --focus-ring: 0 0 0 2px rgba(59, 130, 246, 0.8);
        --radius-lg: 16px;
        --radius-md: 10px;
        --radius-pill: 999px;
        --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.9);
        --shadow-focus: 0 0 0 1px rgba(148, 163, 184, 0.7),
          0 0 0 5px rgba(129, 140, 248, 0.35);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        color: var(--text-main);
        background: radial-gradient(circle at top, #111827 0, #020617 50%);
        display: flex;
        align-items: stretch;
        justify-content: center;
        padding: 32px 16px;
      }

      .shell {
        width: 100%;
        max-width: 1120px;
        background: radial-gradient(circle at top left, #020617 0, #020617 35%),
          radial-gradient(circle at top right, #111827 0, #020617 55%);
        border-radius: 28px;
        border: 1px solid rgba(148, 163, 184, 0.8);
        box-shadow: var(--shadow-soft);
        padding: 24px 26px 26px;
        display: grid;
        grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
        gap: 28px;
        position: relative;
        overflow: hidden;
      }

      @media (max-width: 900px) {
        body {
          padding: 16px 12px;
        }

        .shell {
          grid-template-columns: minmax(0, 1fr);
          padding: 18px 18px 20px;
          border-radius: 22px;
        }
      }

      .shell::before {
        content: "";
        position: absolute;
        inset: -40%;
        background:
          radial-gradient(circle at 5% 0%, rgba(56, 189, 248, 0.22) 0, transparent 55%),
          radial-gradient(circle at 95% 0%, rgba(129, 140, 248, 0.24) 0, transparent 55%),
          radial-gradient(circle at 50% 120%, rgba(244, 114, 182, 0.15) 0, transparent 55%);
        opacity: 0.9;
        mix-blend-mode: soft-light;
        pointer-events: none;
      }

      .shell-inner {
        position: relative;
        z-index: 1;
        display: contents;
      }

      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        margin-bottom: 18px;
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .brand-logo {
        width: 36px;
        height: 36px;
        border-radius: 18px;
        background:
          conic-gradient(from 210deg, #7c3aed, #22d3ee, #f97316, #7c3aed);
        padding: 3px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9),
          0 12px 30px rgba(15, 23, 42, 0.9);
      }

      .brand-logo-inner {
        width: 100%;
        height: 100%;
        border-radius: 14px;
        background: radial-gradient(circle at 30% 15%, #e5e7eb, #e5e7eb 5%, #020617 65%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #020617;
        font-size: 16px;
        font-weight: 800;
        letter-spacing: 0.02em;
      }

      .brand-text-main {
        font-size: 18px;
        font-weight: 650;
        letter-spacing: 0.01em;
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .brand-text-main span:first-child {
        font-size: 14px;
        color: var(--text-muted);
        font-weight: 500;
      }

      .header-tagline {
        font-size: 13px;
        color: var(--text-muted);
        text-align: right;
      }

      .header-tagline strong {
        color: #e5e7eb;
        font-weight: 600;
      }

      @media (max-width: 900px) {
        .header {
          align-items: flex-start;
          flex-direction: column;
        }

        .header-tagline {
          text-align: left;
        }
      }

      .panel {
        background: radial-gradient(circle at top left, #020617 0, #020617 50%),
          radial-gradient(circle at bottom right, #020617 0, #020617 60%);
        border-radius: var(--radius-lg);
        border: 1px solid rgba(51, 65, 85, 0.9);
        padding: 18px 18px 18px;
        position: relative;
        overflow: hidden;
      }

      .panel::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at top, rgba(148, 163, 184, 0.25), transparent 55%);
        opacity: 0.25;
        pointer-events: none;
      }

      .panel-inner {
        position: relative;
        z-index: 1;
      }

      .section-title-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 4px;
      }

      .section-title {
        font-size: 15px;
        font-weight: 600;
      }

      .section-title-pill {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.14em;
        color: var(--text-muted);
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.55);
        padding: 2px 9px;
        background: radial-gradient(circle at top, rgba(15, 23, 42, 0.9), #020617);
      }

      .section-subtitle {
        font-size: 14px;
        font-weight: 500;
        color: var(--text-secondary);
        margin-bottom: 16px;
      }

      .field-group {
        display: flex;
        flex-direction: column;
        gap: 16px;
        margin-bottom: 18px;
      }

      .field-label-row {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 8px;
        margin-bottom: 4px;
        flex-wrap: wrap;
        row-gap: 2px;
      }

      label {
        font-size: 15px;
        font-weight: 600;
        color: #eef2f7;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .label-required {
        color: #fbbf24;
        font-size: 13px;
        font-weight: 650;
      }

      .label-helper {
        font-size: 14px;
        font-weight: 500;
        color: var(--text-secondary);
      }

      /* ì¥ì•  ìƒì„¸ ì„¤ëª…: ì œëª©ê³¼ ì„¤ëª…ì„ ì„¸ë¡œë¡œ ë¶„ë¦¬í•´ ì‹œì¸ì„± ê°œì„  */
      #disability-detail-container .field-label-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
      }

      #disability-detail-container .label-helper {
        font-size: 13px;
        line-height: 1.5;
      }

      .field-label-stacked {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-bottom: 4px;
      }

      .field-label-stacked .label-helper {
        font-size: 13px;
        line-height: 1.4;
      }

      .input-shell {
        position: relative;
      }

      .input-shell::before {
        content: "";
        position: absolute;
        inset: -1px;
        border-radius: var(--radius-md);
        background: radial-gradient(circle at top, rgba(148, 163, 184, 0.5), transparent 68%);
        opacity: 0.12;
        pointer-events: none;
      }

      input[type="text"] {
        width: 100%;
        border-radius: var(--radius-md);
        border: 1px solid var(--border-subtle);
        background: radial-gradient(circle at top, #020617 0, #020617 40%, #020617 100%);
        color: var(--text-main);
        padding: 10px 12px;
        font-size: 15px;
        outline: none;
        transition: border-color 0.15s ease, box-shadow 0.15s ease,
          background 0.15s ease, transform 0.08s ease;
      }

      input[type="text"]::placeholder {
        color: rgba(148, 163, 184, 0.7);
      }

      input[type="text"]:hover {
        border-color: rgba(148, 163, 184, 0.95);
        transform: translateY(-0.5px);
      }

      input[type="text"]:focus-visible {
        border-color: rgba(129, 140, 248, 0.95);
        box-shadow: var(--shadow-focus);
        background: radial-gradient(circle at top, #020617 0, #020617 35%, #020617 100%);
      }

      .error-text {
        font-size: 14px;
        color: var(--danger);
        margin-top: 4px;
        min-height: 18px;
      }

      textarea {
        width: 100%;
        min-height: 80px;
        resize: vertical;
        border-radius: var(--radius-md);
        border: 1px solid var(--border-subtle);
        background: radial-gradient(circle at top, #020617 0, #020617 40%, #020617 100%);
        color: var(--text-main);
        padding: 10px 12px;
        font-size: 13px;
        outline: none;
        line-height: 1.5;
        transition: border-color 0.15s ease, box-shadow 0.15s ease,
          background 0.15s ease, transform 0.08s ease;
      }

      textarea::placeholder {
        color: rgba(148, 163, 184, 0.7);
      }

      textarea:hover {
        border-color: rgba(148, 163, 184, 0.95);
        transform: translateY(-0.5px);
      }

      textarea:focus-visible {
        border-color: rgba(129, 140, 248, 0.95);
        box-shadow: var(--shadow-focus);
        background: radial-gradient(circle at top, #020617 0, #020617 35%, #020617 100%);
      }

      fieldset {
        border: none;
        padding: 0;
        margin: 0;
      }

      .disability-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 10px;
      }

      @media (max-width: 600px) {
        .disability-grid {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      .chip {
        position: relative;
        border-radius: var(--radius-md);
        border: 1px solid rgba(51, 65, 85, 0.9);
        background: radial-gradient(circle at top, #020617 0, #020617 55%);
        padding: 10px 10px 9px;
        display: flex;
        align-items: center;
        gap: 9px;
        cursor: pointer;
        transition: transform 0.08s ease, border-color 0.14s ease,
          box-shadow 0.16s ease, background 0.16s ease;
      }

      .chip:hover {
        transform: translateY(-1px);
        border-color: rgba(148, 163, 184, 0.95);
        box-shadow: 0 14px 25px rgba(15, 23, 42, 0.9);
      }

      .chip[data-selected="true"] {
        border-color: rgba(129, 140, 248, 1);
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.35), rgba(124, 58, 237, 0.4));
        box-shadow: 0 0 0 2px rgba(129, 140, 248, 0.6), 0 16px 40px rgba(15, 23, 42, 1);
      }

      .chip[data-selected="true"]::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.25), transparent 60%);
        pointer-events: none;
      }

      .chip[data-selected="true"] .chip-caption,
      .chip[data-selected="true"] .chip-tag {
        color: rgba(226, 232, 240, 0.95);
      }

      .chip-input {
        display: none;
      }

      .chip-icon {
        width: 28px;
        height: 28px;
        border-radius: 999px;
        background: radial-gradient(circle at 25% 0%, #e5e7eb 0, #020617 70%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        box-shadow: 0 10px 18px rgba(15, 23, 42, 0.85);
      }

      .chip-content {
        display: flex;
        flex-direction: column;
        gap: 2px;
        align-items: flex-start;
      }

      .chip-title {
        font-size: 13px;
        font-weight: 550;
      }

      .chip-caption {
        font-size: 11px;
        color: var(--text-muted);
      }

      .chip-tag {
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        padding: 1px 7px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        color: rgba(209, 213, 219, 0.95);
        background: radial-gradient(circle at top, #020617, #020617 65%);
        margin-top: 2px;
      }

      .summary-bar {
        margin-top: 8px;
        padding-top: 10px;
        border-top: 1px dashed rgba(51, 65, 85, 0.9);
        display: flex;
        flex-wrap: wrap;
        gap: 6px 12px;
        align-items: center;
        font-size: 11px;
      }

      .summary-label {
        color: var(--text-muted);
      }

      .summary-pill {
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.8);
        padding: 3px 8px;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: radial-gradient(circle at top, rgba(15, 23, 42, 0.9), #020617);
      }

      .summary-pill span {
        font-size: 11px;
      }

      .summary-pill-disability {
        border-color: rgba(129, 140, 248, 0.95);
      }

      .summary-empty {
        font-size: 11px;
        color: rgba(148, 163, 184, 0.8);
      }

      .stepper {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 11px;
        color: var(--text-muted);
      }

      .stepper-dot {
        width: 7px;
        height: 7px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        background: radial-gradient(circle at top, #020617, #020617 70%);
      }

      .stepper-dot[data-active="true"] {
        border-color: rgba(129, 140, 248, 1);
        background: radial-gradient(circle at 30% 0%, #818cf8, #4f46e5 70%);
        box-shadow: 0 0 0 1px rgba(129, 140, 248, 0.5);
      }

      .stepper-label {
        font-size: 11px;
        color: rgba(209, 213, 219, 0.9);
      }

      .stepper-count {
        font-variant-numeric: tabular-nums;
      }

      .cta-row {
        margin-top: 16px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        flex-wrap: wrap;
      }

      .guide-trigger {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 18px;
        height: 18px;
        padding: 0;
        margin-left: 6px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        border-radius: 50%;
        background: rgba(148, 163, 184, 0.15);
        color: var(--text-muted);
        font-size: 11px;
        font-weight: 600;
        cursor: help;
        vertical-align: middle;
      }
      .guide-trigger:hover {
        background: rgba(124, 58, 237, 0.25);
        border-color: rgba(124, 58, 237, 0.5);
        color: var(--text-main);
      }
      .guide-popover {
        position: fixed;
        z-index: 1000;
        max-width: 320px;
        padding: 14px 16px;
        background: #1e293b;
        border: 1px solid rgba(148, 163, 184, 0.4);
        border-radius: 10px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.4);
        font-size: 12px;
        line-height: 1.6;
        color: var(--text-muted);
      }
      .guide-popover strong { color: var(--text-main); }
      .guide-popover ol { margin: 0; padding-left: 18px; }
      .guide-popover li { margin-bottom: 4px; }
      .guide-popover code {
        font-family: ui-monospace, monospace;
        font-size: 11px;
        background: rgba(0,0,0,0.3);
        padding: 1px 4px;
        border-radius: 4px;
      }
      .guide-popover::before {
        content: "";
        position: absolute;
        top: -6px;
        left: 20px;
        width: 10px;
        height: 10px;
        background: #1e293b;
        border-left: 1px solid rgba(148, 163, 184, 0.4);
        border-top: 1px solid rgba(148, 163, 184, 0.4);
        transform: rotate(45deg);
      }

      .hint {
        font-size: 11px;
        color: var(--text-muted);
      }

      .hint strong {
        color: #e5e7eb;
        font-weight: 600;
      }

      .btn-primary {
        border-radius: var(--radius-pill);
        padding: 9px 18px 9px;
        border: none;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 13px;
        font-weight: 550;
        color: white;
        background: linear-gradient(120deg, #4f46e5, #7c3aed, #f97316);
        background-size: 200% 100%;
        box-shadow: 0 14px 30px rgba(15, 23, 42, 1);
        transition: transform 0.08s ease, box-shadow 0.1s ease, filter 0.1s ease,
          background-position 0.15s ease;
      }

      .btn-primary:hover {
        transform: translateY(-1px);
        filter: brightness(1.06);
        background-position: 100% 0;
        box-shadow: 0 20px 40px rgba(15, 23, 42, 1);
      }

      .btn-primary:active {
        transform: translateY(0);
        box-shadow: 0 10px 22px rgba(15, 23, 42, 0.95);
      }

      .btn-primary:focus-visible {
        outline: none;
        box-shadow: var(--shadow-focus), 0 16px 36px rgba(15, 23, 42, 1);
      }

      .btn-primary-icon {
        width: 18px;
        height: 18px;
        border-radius: 999px;
        background: radial-gradient(circle at 25% 0%, #e5e7eb, #020617 65%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 11px;
      }

      .btn-primary-sub {
        font-size: 11px;
        opacity: 0.9;
        font-weight: 500;
      }

      .btn-secondary {
        border-radius: var(--radius-pill);
        padding: 8px 14px 8px;
        border: 1px solid rgba(148, 163, 184, 0.8);
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 12px;
        font-weight: 500;
        color: rgba(209, 213, 219, 0.95);
        background: radial-gradient(circle at top, #020617, #020617 65%);
        transition: transform 0.08s ease, box-shadow 0.1s ease, filter 0.1s ease;
      }

      .btn-secondary:hover {
        transform: translateY(-1px);
        filter: brightness(1.05);
        box-shadow: 0 12px 24px rgba(15, 23, 42, 0.95);
      }

      .btn-secondary:active {
        transform: translateY(0);
        box-shadow: 0 8px 16px rgba(15, 23, 42, 0.9);
      }

      .btn-secondary:focus-visible {
        outline: none;
        box-shadow: var(--shadow-focus), 0 10px 20px rgba(15, 23, 42, 0.95);
      }

      .right-panel {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .right-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
      }

      .right-title {
        font-size: 14px;
        font-weight: 550;
      }

      .right-badge {
        font-size: 11px;
        color: rgba(209, 213, 219, 0.95);
        border-radius: 999px;
        padding: 3px 9px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        background: radial-gradient(circle at top, #020617, #020617 65%);
      }

      .right-body {
        font-size: 12px;
        color: var(--text-muted);
        line-height: 1.5;
      }

      .right-body ul {
        margin: 8px 0 0;
        padding-left: 18px;
      }

      .right-body li {
        margin-bottom: 4px;
      }

      .pill-row {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 10px;
      }

      .pill {
        font-size: 10px;
        border-radius: 999px;
        padding: 3px 8px;
        border: 1px solid rgba(148, 163, 184, 0.6);
        color: rgba(209, 213, 219, 0.95);
        background: radial-gradient(circle at top, #020617, #020617 65%);
      }

      .pill-accent {
        border-color: rgba(129, 140, 248, 0.95);
      }

      .overview {
        margin-top: 10px;
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 8px;
      }

      @media (max-width: 600px) {
        .overview {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      .stat {
        border-radius: var(--radius-md);
        border: 1px solid rgba(51, 65, 85, 0.9);
        padding: 8px 10px;
        background: radial-gradient(circle at top, #020617, #020617 58%);
      }

      .stat-label {
        font-size: 11px;
        color: var(--text-muted);
        margin-bottom: 3px;
      }

      .stat-value {
        font-size: 15px;
        font-weight: 650;
      }

      .stat-caption {
        font-size: 11px;
        color: rgba(148, 163, 184, 0.85);
        margin-top: 1px;
      }

      .stat-dot-row {
        margin-top: 5px;
        display: flex;
        gap: 3px;
      }

      .stat-dot {
        width: 4px;
        height: 4px;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.65);
      }

      .stat-dot-accent {
        background: #7c3aed;
      }

      .screen-reader-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        border: 0;
      }
    </style>
  </head>
  <body>
    <a href="#main-content" class="skip-link">ë³¸ë¬¸ìœ¼ë¡œ ê±´ë„ˆë›°ê¸°</a>
    <main id="main-content" class="shell" aria-labelledby="app-title" role="main">
      <div class="shell-inner">
        <section style="grid-column: 1 / -1">
          <header class="header">
            <div class="brand" aria-label="ê²Œì„ ì ‘ê·¼ì„± ì¸¡ì • ë„êµ¬">
              <div class="brand-logo" aria-hidden="true">
                <div class="brand-logo-inner">GA</div>
              </div>
              <div class="brand-text-main">
                <span>ê²Œì„ ì ‘ê·¼ì„± ì¸¡ì •</span>
                <h1 id="app-title" class="brand-text-main" style="font-size: inherit; font-weight: inherit; margin: 0;">Inclusive Play Dashboard</h1>
              </div>
            </div>
            <p class="header-tagline">
              <strong>ì¥ì•  ìœ í˜•ë³„ ê²½í—˜</strong>ì„ ê¸°ë°˜ìœ¼ë¡œ ê²Œì„ ì ‘ê·¼ì„±ì„ ì •ëŸ‰Â·ì •ì„±ì ìœ¼ë¡œ ê¸°ë¡í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.
            </p>
          </header>
        </section>

        <section aria-label="ë‹¤ë‹¨ê³„ ì ‘ê·¼ì„± ì„¸ì…˜ ì…ë ¥ í¼">
          <div class="panel">
            <div class="panel-inner">
              <div class="section-title-row">
                <div class="section-title">ì„¸ì…˜ ì •ë³´ ì…ë ¥</div>
                <div class="stepper" aria-hidden="true">
                  <span class="stepper-dot" data-step-dot="1" data-active="true"></span>
                  <span class="stepper-dot" data-step-dot="2"></span>
                  <span class="stepper-dot" data-step-dot="3"></span>
                  <span class="stepper-dot" data-step-dot="4"></span>
                  <span class="stepper-dot" data-step-dot="5"></span>
                  <span class="stepper-label">
                    <span class="stepper-count" id="current-step-label">1</span>/5
                  </span>
                </div>
              </div>
              <p class="section-subtitle" id="step-description">
                1ë‹¨ê³„ì—ì„œëŠ” ê¸°ë³¸ ì¸êµ¬í†µê³„ ì •ë³´ì™€ ìë£Œ ì‹ ë¢°ë„ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
              </p>

              <form id="accessibility-form" novalidate>
                <!-- STEP 1: ê¸°ë³¸ì •ë³´ -->
                <div
                  class="field-group"
                  data-step="1"
                  aria-labelledby="step1-title"
                >
                  <div class="field-label-row">
                    <label id="step1-title">
                      ê¸°ë³¸ì •ë³´
                      <span class="label-required">í•„ìˆ˜</span>
                    </label>
                    <span class="label-helper">ì„¸ì…˜ ID Â· ì„±ë³„ Â· ì—°ë ¹ëŒ€ Â· ì •ë³´ ì‹ ë¢°ë„</span>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="user-id">
                        ì„¸ì…˜/ì°¸ê°€ì ID
                        <span class="label-required">í•„ìˆ˜</span>
                      </label>
                      <button type="button" class="btn-secondary" id="restore-session" style="padding: 4px 10px; font-size: 11px;">
                        ê¸°ì¡´ ì‘ì—… ë¶ˆëŸ¬ì˜¤ê¸°
                      </button>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="user-id"
                        name="userId"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: P001, session-20250205 (ë™ì¼ IDë¡œ ë³µêµ¬ ê°€ëŠ¥)"
                        aria-describedby="user-id-error"
                      />
                    </div>
                    <p id="user-id-error" class="error-text" aria-live="polite"></p>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="gender">
                        ì„±ë³„
                        <span class="label-required">í•„ìˆ˜</span>
                      </label>
                      <span class="label-helper">í•„ìš” ì‹œ ì»¤ìŠ¤í…€ ê¸°ì… ê°€ëŠ¥</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="gender"
                        name="gender"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: ë‚¨ì„±, ì—¬ì„±, ë…¼ë°”ì´ë„ˆë¦¬ ë“±"
                        aria-describedby="gender-error"
                      />
                    </div>
                    <p id="gender-error" class="error-text" aria-live="polite"></p>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="age-range">
                        ì—°ë ¹ëŒ€
                        <span class="label-required">í•„ìˆ˜</span>
                      </label>
                      <span class="label-helper">10ëŒ€, 20ëŒ€, 30ëŒ€, 40ëŒ€ ì´ìƒ ë“±</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="age-range"
                        name="ageRange"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: 20ëŒ€ í›„ë°˜, 30ëŒ€ ì´ˆë°˜"
                        aria-describedby="age-error"
                      />
                    </div>
                    <p id="age-error" class="error-text" aria-live="polite"></p>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="reliability">
                        ì •ë³´ ì‹ ë¢°ë„
                        <span class="label-required">í•„ìˆ˜</span>
                      </label>
                      <span class="label-helper">ìƒ: ì§ì ‘ í…ŒìŠ¤íŠ¸, ì¤‘: ì§ì ‘ ê´€ì°° ë°ì´í„°, í•˜: í¬ë¡¤ë§ ë˜ëŠ” ê°„ì ‘ ê´€ì°° ë°ì´í„°</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="reliability"
                        name="reliability"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: ìƒ, ì¤‘, í•˜"
                        aria-describedby="reliability-error"
                      />
                    </div>
                    <p
                      id="reliability-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>
                </div>

                <!-- STEP 2: ì¥ì• ìƒì„¸ -->
                <div
                  class="field-group"
                  data-step="2"
                  aria-labelledby="step2-title"
                  style="display: none"
                >
                  <div class="field-label-row">
                    <label id="step2-title">
                      ì¥ì•  ìƒì„¸
                      <span class="label-required">í•„ìˆ˜</span>
                    </label>
                    <span class="label-helper">
                      ì£¼ìš” ì¥ì•  ìœ í˜• ì„ íƒ í›„, ì„¸ë¶€ ì–‘ìƒì„ ê°„ë‹¨íˆ ê¸°ìˆ í•´ì£¼ì„¸ìš”.
                    </span>
                  </div>

                  <fieldset>
                    <legend class="screen-reader-only">ì£¼ìš” ì¥ì•  ìœ í˜• ì„ íƒ</legend>
                    <p class="label-helper" style="margin-bottom: 8px;">ë³µí•© ì¥ì• ì¸ ê²½ìš° 2ê°œ ì´ìƒ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    <div class="disability-grid" id="disability-options">
                      <label class="chip" data-disability="ì‹œê°" tabindex="0">
                        <input
                          class="chip-input"
                          type="checkbox"
                          name="disabilityType"
                          value="ì‹œê°"
                          aria-label="ì‹œê° ì¥ì• "
                        />
                        <div class="chip-icon" aria-hidden="true">ğŸ‘ï¸</div>
                        <div class="chip-content">
                          <span class="chip-title">ì‹œê°</span>
                          <span class="chip-caption">ì‹œì•¼Â·ì‹œë ¥, ëŒ€ë¹„, ìƒ‰ ì¸ì§€ ë“±</span>
                          <span class="chip-tag">Screen / Contrast</span>
                        </div>
                      </label>

                      <label class="chip" data-disability="ìš´ë™" tabindex="0">
                        <input
                          class="chip-input"
                          type="checkbox"
                          name="disabilityType"
                          value="ìš´ë™"
                          aria-label="ìš´ë™ ì¥ì• "
                        />
                        <div class="chip-icon" aria-hidden="true">ğŸ®</div>
                        <div class="chip-content">
                          <span class="chip-title">ìš´ë™</span>
                          <span class="chip-caption">ê°€ë™ ë²”ìœ„, ì†Â·íŒ” ë–¨ë¦¼, ì…ë ¥ ì†ë„</span>
                          <span class="chip-tag">Input / Motor</span>
                        </div>
                      </label>

                      <label class="chip" data-disability="ì²­ê°ì–¸ì–´ì¥ì• " tabindex="0">
                        <input
                          class="chip-input"
                          type="checkbox"
                          name="disabilityType"
                          value="ì²­ê°ì–¸ì–´ì¥ì• "
                          aria-label="ì²­ê°ì–¸ì–´ì¥ì• "
                        />
                        <div class="chip-icon" aria-hidden="true">ğŸ”Š</div>
                        <div class="chip-content">
                          <span class="chip-title">ì²­ê°ì–¸ì–´ì¥ì• </span>
                          <span class="chip-caption">ê³ Â·ì €ìŒ ì¸ì§€, í•œìª½/ì–‘ìª½ ì²­ë ¥ ì°¨ì´, ì–¸ì–´ ëª…ë£Œë„</span>
                          <span class="chip-tag">Audio / Language</span>
                        </div>
                      </label>

                      <label class="chip" data-disability="ì¸ì§€" tabindex="0">
                        <input
                          class="chip-input"
                          type="checkbox"
                          name="disabilityType"
                          value="ì¸ì§€"
                          aria-label="ì¸ì§€ ì¥ì• "
                        />
                        <div class="chip-icon" aria-hidden="true">ğŸ§ </div>
                        <div class="chip-content">
                          <span class="chip-title">ì¸ì§€</span>
                          <span class="chip-caption">ì£¼ì˜ì§‘ì¤‘, ê¸°ì–µ, ì²˜ë¦¬ ì†ë„ ë“±</span>
                          <span class="chip-tag">Cognitive Load</span>
                        </div>
                      </label>
                    </div>
                    <p id="disability-error" class="error-text" aria-live="polite"></p>
                  </fieldset>

                  <div id="disability-detail-container">
                    <div class="field-label-row">
                      <label for="disability-detail">
                        ì¥ì•  ìƒì„¸ ì„¤ëª…
                        <span class="label-required">í•„ìˆ˜</span>
                      </label>
                      <span class="label-helper" id="disability-detail-hint">
                        ì„ íƒí•œ ì¥ì•  ìœ í˜•ì— ë§ì¶° ì£¼ìš” íŠ¹ì§•ì„ ê¸°ì…í•´ì£¼ì„¸ìš”.
                      </span>
                    </div>
                    <div class="input-shell">
                      <textarea
                        id="disability-detail"
                        name="disabilityDetail"
                        placeholder="ì˜ˆ: (ìš´ë™) ì˜¤ë¥¸ì† ê°€ë™ ë²”ìœ„ ì œí•œ, ì¥ì‹œê°„ ë²„íŠ¼ ì—°íƒ€ ì–´ë ¤ì›€ ë“±"
                        aria-describedby="disability-detail-error disability-detail-hint"
                      ></textarea>
                    </div>
                    <p
                      id="disability-detail-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>
                </div>

                <!-- STEP 3: ê²Œì„í™˜ê²½ -->
                <div
                  class="field-group"
                  data-step="3"
                  aria-labelledby="step3-title"
                  style="display: none"
                >
                  <div class="field-label-row">
                    <label id="step3-title">
                      ê²Œì„ í™˜ê²½
                      <span class="label-required">í•„ìˆ˜</span>
                    </label>
                    <span class="label-helper">
                      í”Œë ˆì´ í”Œë«í¼, ì…ë ¥ì¥ì¹˜, ì‚¬ìš© ì¤‘ì¸ ë³´ì¡°ê¸°ê¸°ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.
                    </span>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="platform">
                        í”Œë ˆì´ í”Œë«í¼
                        <span class="label-required">í•„ìˆ˜</span>
                      </label>
                      <span class="label-helper">PC, ì½˜ì†”, ëª¨ë°”ì¼ ë“±</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="platform"
                        name="platform"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: PC(ìŠ¤íŒ€), PS5, ëª¨ë°”ì¼(Android)"
                        aria-describedby="platform-error"
                      />
                    </div>
                    <p
                      id="platform-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="input-device">
                        ì…ë ¥ì¥ì¹˜
                        <span class="label-required">í•„ìˆ˜</span>
                      </label>
                      <span class="label-helper">ë§ˆìš°ìŠ¤+í‚¤ë³´ë“œ, íŒ¨ë“œ, í„°ì¹˜ ë“±</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="input-device"
                        name="inputDevice"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: ì—‘ìŠ¤ë°•ìŠ¤ íŒ¨ë“œ, í‚¤ë³´ë“œ+ë§ˆìš°ìŠ¤, í„°ì¹˜ ì¡°ì‘"
                        aria-describedby="input-device-error"
                      />
                    </div>
                    <p
                      id="input-device-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>

                  <div>
                    <div class="field-label-stacked">
                      <label for="assistive-device">
                        ë³´ì¡°ê¸°ê¸° / ì…ë ¥ ì¥ì¹˜
                      </label>
                      <span class="label-helper">í…ŒìŠ¤íŠ¸ì— ì‚¬ìš© ì¤‘ì¸ ë§ˆìš°ìŠ¤, í‚¤ë³´ë“œ, ë˜ëŠ” ë³´ì¡° ì…ë ¥ ì¥ì¹˜ë¥¼ ì ì–´ì£¼ì„¸ìš”. (ì˜ˆ: ì¼ë°˜ ë§ˆìš°ìŠ¤, ë°œ í˜ë‹¬ ë“±)</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="assistive-device"
                        name="assistiveDevice"
                        autocomplete="off"
                        placeholder="ì˜ˆ: ì¼ë°˜ ë§ˆìš°ìŠ¤, ë°œ í˜ë‹¬, Xbox Adaptive Controller ë“±"
                        aria-describedby="assistive-device-error"
                      />
                    </div>
                    <p
                      id="assistive-device-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>
                </div>

                <!-- STEP 4: PC í™˜ê²½ -->
                <div
                  class="field-group"
                  data-step="4"
                  aria-labelledby="step4-title"
                  style="display: none"
                >
                  <div class="field-label-stacked">
                    <label id="step4-title">
                      PC í™˜ê²½
                      <span class="label-required">í•„ìˆ˜</span>
                    </label>
                    <span class="label-helper">
                      ëª¨ë‹ˆí„° í•´ìƒë„, ìœˆë„ìš° ë°°ìœ¨(DPI), CPU/GPU ìŠ¤í™, FOV ì„¤ì • ì—¬ë¶€ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.
                    </span>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="pc-resolution">
                        ëª¨ë‹ˆí„° í•´ìƒë„
                        <span class="label-required">í•„ìˆ˜</span>
                        <button type="button" class="guide-trigger" data-guide="resolution" aria-label="ì°¾ëŠ” ë°©ë²•">?</button>
                      </label>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="pc-resolution"
                        name="pcResolution"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: 1920x1080, 2560x1440, 3840x2160 ë“±"
                        aria-describedby="pc-resolution-error"
                      />
                    </div>
                    <p
                      id="pc-resolution-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>

                  <div>
                    <div class="field-label-stacked">
                      <label for="windows-dpi">
                        ìœˆë„ìš° ë°°ìœ¨(DPI)
                        <span class="label-required">í•„ìˆ˜</span>
                        <button type="button" class="guide-trigger" data-guide="dpi" aria-label="ì°¾ëŠ” ë°©ë²•">?</button>
                      </label>
                      <span class="label-helper">
                        OS ë””ìŠ¤í”Œë ˆì´ ì„¤ì •ì˜ ë°°ìœ¨ ê°’(ì˜ˆ: 100%, 125%, 150%)ì„ ì§ì ‘ í™•ì¸í•´ ì…ë ¥í•´ì£¼ì„¸ìš”.
                      </span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="windows-dpi"
                        name="windowsDpi"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: 100%, 125%, 150% (ë©€í‹° ëª¨ë‹ˆí„°ë©´ ì£¼ìš” ëª¨ë‹ˆí„° ê¸°ì¤€)"
                        aria-describedby="windows-dpi-error"
                      />
                    </div>
                    <p
                      id="windows-dpi-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="monitor-size-inch">
                        ëª¨ë‹ˆí„° í¬ê¸°(ì¸ì¹˜)
                        <span class="label-required">í•„ìˆ˜</span>
                        <button type="button" class="guide-trigger" data-guide="monitor" aria-label="ì°¾ëŠ” ë°©ë²•">?</button>
                      </label>
                      <span class="label-helper">
                        ëŒ€ê°ì„  ê¸¸ì´ ê¸°ì¤€ ì¸ì¹˜(ì˜ˆ: 24, 27, 32)
                      </span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="monitor-size-inch"
                        name="monitorSizeInch"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: 24, 27, 32"
                        aria-describedby="monitor-size-inch-error"
                      />
                    </div>
                    <p
                      id="monitor-size-inch-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="viewing-distance">
                        ì‹œì²­ ê±°ë¦¬ (cm)
                      </label>
                      <span class="label-helper">
                        ìœ ì €ì™€ ëª¨ë‹ˆí„° ì‚¬ì´ ê±°ë¦¬. ê¸°ë³¸ 60cm
                      </span>
                    </div>
                    <div class="input-shell" style="display: flex; align-items: center; gap: 12px;">
                      <input
                        type="range"
                        id="viewing-distance"
                        name="viewingDistance"
                        min="30"
                        max="150"
                        step="5"
                        value="60"
                        style="flex: 1; accent-color: var(--accent);"
                        aria-describedby="viewing-distance-value"
                      />
                      <span id="viewing-distance-value" class="stat-value" style="min-width: 56px;" aria-live="polite">60 cm</span>
                    </div>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="cpu-spec">
                        CPU ìŠ¤í™
                        <span class="label-required">í•„ìˆ˜</span>
                        <button type="button" class="guide-trigger" data-guide="cpu" aria-label="ì°¾ëŠ” ë°©ë²•">?</button>
                      </label>
                      <span class="label-helper">ëª¨ë¸ëª…ê³¼ ëŒ€ëµì ì¸ ì„¸ëŒ€/ì½”ì–´ ìˆ˜ ë“±</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="cpu-spec"
                        name="cpuSpec"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: Ryzen 5 5600X, i5-12400F ë“±"
                        aria-describedby="cpu-spec-error"
                      />
                    </div>
                    <p
                      id="cpu-spec-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="gpu-spec">
                        GPU ìŠ¤í™
                        <span class="label-required">í•„ìˆ˜</span>
                        <button type="button" class="guide-trigger" data-guide="gpu" aria-label="ì°¾ëŠ” ë°©ë²•">?</button>
                      </label>
                      <span class="label-helper">ëª¨ë¸ëª…ê³¼ VRAM ìš©ëŸ‰ ë“±</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="gpu-spec"
                        name="gpuSpec"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: RTX 3060 12GB, RX 6600 8GB ë“±"
                        aria-describedby="gpu-spec-error"
                      />
                    </div>
                    <p
                      id="gpu-spec-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>

                  <div>
                    <div class="field-label-stacked">
                      <label for="game-fov">
                        ê²Œì„ ë‚´ FOV ì„¤ì •
                      </label>
                      <span class="label-helper">
                        ê²Œì„ ì˜µì…˜ì—ì„œ ë³„ë„ ì‹œì•¼ê°(FOV) ì„¤ì •ì´ ìˆëŠ”ì§€ í™•ì¸ í›„, í˜„ì¬ ê°’ì„ ë©”ëª¨í•´ì£¼ì„¸ìš”.
                      </span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="game-fov"
                        name="gameFov"
                        autocomplete="off"
                        placeholder="ì˜ˆ: FOV 90, ê¸°ë³¸ê°’(ì„¤ì • ì—†ìŒ) ë“±"
                        aria-describedby="game-fov-error"
                      />
                    </div>
                    <p
                      id="game-fov-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>
                </div>

                <!-- STEP 5: í”Œë ˆì´ ì´ë ¥ -->
                <div
                  class="field-group"
                  data-step="5"
                  aria-labelledby="step5-title"
                  style="display: none"
                >
                  <div class="field-label-row">
                    <label id="step5-title">
                      í”Œë ˆì´ ì´ë ¥
                      <span class="label-required">í•„ìˆ˜</span>
                    </label>
                    <span class="label-helper">
                      ì¥ë¥´, ì£¼ë¡œ í”Œë ˆì´í•˜ëŠ” ê²Œì„, ìˆ™ë ¨ë„, ëˆ„ì  ì‹œê°„, ê³¼ê¸ˆ ê·œëª¨ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.
                    </span>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="genre">
                        ì£¼ í”Œë ˆì´ ì¥ë¥´
                        <span class="label-required">í•„ìˆ˜</span>
                      </label>
                      <span class="label-helper">FPS, MOBA, RPG, ì¸ë””, ìºì£¼ì–¼ ë“±</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="genre"
                        name="genre"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: FPS, ì•¡ì…˜ RPG, í¼ì¦ ì¸ë””"
                        aria-describedby="genre-error"
                      />
                    </div>
                    <p id="genre-error" class="error-text" aria-live="polite"></p>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="game-title">
                        ì£¼ìš” ê²Œì„ëª…
                        <span class="label-required">í•„ìˆ˜</span>
                      </label>
                      <span class="label-helper">í‰ê°€ ëŒ€ìƒ í˜¹ì€ ëŒ€í‘œ íƒ€ì´í‹€</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="game-title"
                        name="gameTitle"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: ë¦¬ê·¸ ì˜¤ë¸Œ ë ˆì „ë“œ, ì ¤ë‹¤ì˜ ì „ì„¤, ìŠ¤íƒ€ë“€ë°¸ë¦¬"
                        aria-describedby="game-title-error"
                      />
                    </div>
                    <p
                      id="game-title-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="skill-tier">
                        ìˆ™ë ¨ë„(í‹°ì–´)
                        <span class="label-required">í•„ìˆ˜</span>
                      </label>
                      <span class="label-helper">ë­í¬/í‹°ì–´ ë˜ëŠ” ì£¼ê´€ì  ìˆ˜ì¤€</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="skill-tier"
                        name="skillTier"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: í”Œë˜í‹°ë„˜, ìƒ/ì¤‘/í•˜, ìºì£¼ì–¼ ìˆ˜ì¤€"
                        aria-describedby="skill-tier-error"
                      />
                    </div>
                    <p
                      id="skill-tier-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="playtime">
                        ëˆ„ì  í”Œë ˆì´ ì‹œê°„
                        <span class="label-required">í•„ìˆ˜</span>
                      </label>
                      <span class="label-helper">ëŒ€ëµì ì¸ ì´ ì‹œê°„(ì‹œê°„/ë…„ ë‹¨ìœ„ ë“±)</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="playtime"
                        name="playtime"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: í•´ë‹¹ ê²Œì„ 300ì‹œê°„, ì—°ê°„ ì•½ 500ì‹œê°„"
                        aria-describedby="playtime-error"
                      />
                    </div>
                    <p
                      id="playtime-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>

                  <div>
                    <div class="field-label-row">
                      <label for="spending">
                        ê³¼ê¸ˆ ê·œëª¨
                        <span class="label-required">í•„ìˆ˜</span>
                      </label>
                      <span class="label-helper">ë¬´ê³¼ê¸ˆ / ì†Œì•¡ / ì¤‘ê³¼ê¸ˆ / ê³ ê³¼ê¸ˆ ë“±</span>
                    </div>
                    <div class="input-shell">
                      <input
                        type="text"
                        id="spending"
                        name="spending"
                        required
                        autocomplete="off"
                        placeholder="ì˜ˆ: ë¬´ê³¼ê¸ˆ, ì›” 1~3ë§Œ ì›, ëˆ„ì  100ë§Œ ì› ì´ìƒ ë“±"
                        aria-describedby="spending-error"
                      />
                    </div>
                    <p
                      id="spending-error"
                      class="error-text"
                      aria-live="polite"
                    ></p>
                  </div>
                </div>

                <div class="summary-bar" aria-live="polite">
                  <span class="summary-label">ìš”ì•½:</span>
                  <span id="summary-user" class="summary-empty">
                    ê° ë‹¨ê³„ë¥¼ ì±„ìš°ë©´ ì´ ì˜ì—­ì— í•µì‹¬ ì •ë³´ê°€ ìš”ì•½ë©ë‹ˆë‹¤.
                  </span>
                </div>

                <div class="cta-row">
                  <button
                    type="button"
                    class="btn-secondary"
                    id="prev-step"
                    aria-label="ì´ì „ ë‹¨ê³„ë¡œ ì´ë™"
                    disabled
                  >
                    â—€ ì´ì „
                  </button>
                  <p class="hint" id="step-hint">
                    <strong>ë‹¤ìŒ</strong> ë²„íŠ¼ ë˜ëŠ” Enterë¡œ ë‹¨ê³„ë³„ë¡œ ì´ë™í•˜ì„¸ìš”.
                  </p>
                  <button
                    type="button"
                    class="btn-primary"
                    id="next-step"
                    aria-label="ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™"
                  >
                    <span class="btn-primary-icon" aria-hidden="true">â–¶</span>
                    <span id="next-step-label">ë‹¤ìŒ ë‹¨ê³„</span>
                    <span class="btn-primary-sub" id="next-step-sub">
                      Move to step 2
                    </span>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </section>

        <aside class="right-panel" aria-label="ë„ì›€ë§ ë° ì§„í–‰ ìƒí™© ê°œìš”">
          <div class="right-header">
            <div class="right-title">ì„¸ì…˜ ê°œìš” & ê°€ì´ë“œ</div>
            <span class="right-badge" id="step-indicator">Step 1 / 5</span>
          </div>

          <div class="panel" aria-hidden="false">
            <div class="panel-inner">
              <div class="right-body">
                ì´ ë„êµ¬ëŠ” ê° ì¥ì•  ìœ í˜•ë³„ë¡œ ê²Œì„ í”Œë ˆì´ ê²½í—˜ì„ ì„¸ë°€í•˜ê²Œ ê¸°ë¡í•˜ê¸° ìœ„í•œ
                ë‚´ë¶€ìš© ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤. ì•„ë˜ í•­ëª© ìˆœì„œì— ë”°ë¼ ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.

                <ul>
                  <li><strong>ê¸°ë³¸ì •ë³´</strong>: ì„±ë³„, ì—°ë ¹ëŒ€, ì •ë³´ ì‹ ë¢°ë„</li>
                  <li><strong>ì¥ì• ìƒì„¸</strong>: ì£¼ìš” ì¥ì•  ìœ í˜• ë° ì„¸ë¶€ ì–‘ìƒ</li>
                  <li><strong>ê²Œì„í™˜ê²½</strong>: í”Œë«í¼, ì…ë ¥ì¥ì¹˜, ë³´ì¡°ê¸°ê¸°</li>
                  <li><strong>PC í™˜ê²½</strong>: í•´ìƒë„, ë°°ìœ¨(DPI), CPU/GPU</li>
                  <li><strong>í”Œë ˆì´ì´ë ¥</strong>: ì¥ë¥´, ëŒ€í‘œ ê²Œì„, ìˆ™ë ¨ë„, ì‹œê°„, ê³¼ê¸ˆ</li>
                </ul>

                <div class="pill-row">
                  <span class="pill pill-accent">ë‹¨ê³„ë³„ ì €ë¶€í•˜ ì…ë ¥</span>
                  <span class="pill">ì„¸ì…˜ ê°„ ë¹„êµ ìš©ì´</span>
                  <span class="pill">ì •ì„±Â·ì •ëŸ‰ ë°ì´í„° ìœµí•©</span>
                  <span class="pill">ë¹Œë“œë³„ íšŒê·€ í…ŒìŠ¤íŠ¸ ëŒ€ì‘</span>
                </div>

                <div class="overview" aria-hidden="true">
                  <div class="stat">
                    <div class="stat-label">í¼ ë‹¨ê³„</div>
                    <div class="stat-value" id="stat-step">1 / 5</div>
                    <div class="stat-caption">ê¸°ë³¸ì •ë³´ ì…ë ¥ ì¤‘</div>
                    <div class="stat-dot-row">
                      <span class="stat-dot stat-dot-accent"></span>
                      <span class="stat-dot"></span>
                      <span class="stat-dot"></span>
                    </div>
                  </div>
                  <div class="stat">
                    <div class="stat-label">í•„ìˆ˜ ë¸”ë¡</div>
                    <div class="stat-value">5</div>
                    <div class="stat-caption">ëª¨ë‘ ì…ë ¥ ì‹œ ì„¸ì…˜ ìƒì„±</div>
                    <div class="stat-dot-row">
                      <span class="stat-dot stat-dot-accent"></span>
                      <span class="stat-dot stat-dot-accent"></span>
                      <span class="stat-dot stat-dot-accent"></span>
                    </div>
                  </div>
                  <div class="stat">
                    <div class="stat-label">ì„¸ì…˜ ìƒíƒœ</div>
                    <div class="stat-value" id="stat-session">Draft</div>
                    <div class="stat-caption">ì™„ë£Œ ì‹œ sessionStorage ì €ì¥</div>
                    <div class="stat-dot-row">
                      <span class="stat-dot"></span>
                      <span class="stat-dot"></span>
                      <span class="stat-dot stat-dot-accent"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <script src="ga-storage.js"></script>
    <script>
      (function () {
        const form = document.getElementById("accessibility-form");
        const summaryUser = document.getElementById("summary-user");
        const stepIndicator = document.getElementById("step-indicator");
        const statStep = document.getElementById("stat-step");
        const statSession = document.getElementById("stat-session");
        const currentStepLabel = document.getElementById("current-step-label");
        const stepDescription = document.getElementById("step-description");
        const stepHint = document.getElementById("step-hint");
        const nextStepButton = document.getElementById("next-step");
        const prevStepButton = document.getElementById("prev-step");
        const nextStepLabel = document.getElementById("next-step-label");
        const nextStepSub = document.getElementById("next-step-sub");

        const disabilityContainer = document.getElementById("disability-options");
        const disabilityDetail = document.getElementById("disability-detail");
        const disabilityDetailHint = document.getElementById(
          "disability-detail-hint"
        );
        const disabilityError = document.getElementById("disability-error");
        const disabilityDetailError = document.getElementById(
          "disability-detail-error"
        );

        const TOTAL_STEPS = 5;
        let currentStep = 1;

        const stepDescriptions = {
          1: "1ë‹¨ê³„ì—ì„œëŠ” ê¸°ë³¸ ì¸êµ¬í†µê³„ ì •ë³´ì™€ ìë£Œ ì‹ ë¢°ë„ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.",
          2: "2ë‹¨ê³„ì—ì„œëŠ” ì£¼ìš” ì¥ì•  ìœ í˜•ê³¼ ê·¸ ì–‘ìƒì„ ê°„ë‹¨íˆ ì„œìˆ í•©ë‹ˆë‹¤.",
          3: "3ë‹¨ê³„ì—ì„œëŠ” ì‹¤ì œ í”Œë ˆì´ í™˜ê²½(í”Œë«í¼, ì…ë ¥ì¥ì¹˜, ë³´ì¡°ê¸°ê¸°)ì„ ê¸°ë¡í•©ë‹ˆë‹¤.",
          4: "4ë‹¨ê³„ì—ì„œëŠ” PC í™˜ê²½(í•´ìƒë„, ë°°ìœ¨, ëª¨ë‹ˆí„° í¬ê¸°, CPU/GPU)ì„ ê¸°ë¡í•©ë‹ˆë‹¤.",
          5: "5ë‹¨ê³„ì—ì„œëŠ” í”Œë ˆì´ ì´ë ¥ê³¼ ìˆ™ë ¨ë„, ê³¼ê¸ˆ ê·œëª¨ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.",
        };

        const disabilityHints = {
          ì‹œê°: "ì˜ˆ: ì €ì‹œë ¥, ìƒ‰ê° ì´ìƒ, ì¤‘ì‹¬ì‹œì•¼/ì£¼ë³€ì‹œì•¼ ì œí•œ, í•œìª½ ì‹œì•¼ ìƒì‹¤ ë“±",
          ìš´ë™:
            "ì˜ˆ: ì†ê°€ë½/ì†ëª© ê°€ë™ ë²”ìœ„ ì œí•œ, í•œ ì† í”Œë ˆì´, ë²„íŠ¼ ì—°íƒ€ ê³¤ë€, ë¯¸ì„¸ ì¡°ì‘ ì–´ë ¤ì›€ ë“±",
          "ì²­ê°ì–¸ì–´ì¥ì• ": "ì˜ˆ: í•œìª½ ê·€ ë‚œì²­, ê³ ìŒ/ì €ìŒ ì¸ì§€ ì–´ë ¤ì›€, ë°°ê²½ ì†ŒìŒ ì† ëŒ€ì‚¬ ì¸ì§€ ê³¤ë€, ì–¸ì–´ ëª…ë£Œë„ ì €í•˜ ë“±",
          ì¸ì§€: "ì˜ˆ: ë³µì¡í•œ UI ì´í•´ ì–´ë ¤ì›€, ì§§ì€ ì£¼ì˜ ì§‘ì¤‘ ì‹œê°„, ì‹¤ì‹œê°„ íŒë‹¨ ë¶€ë‹´ ë“±",
        };

        function setStep(step) {
          if (step < 1 || step > TOTAL_STEPS) return;
          currentStep = step;

          const groups = form.querySelectorAll(".field-group[data-step]");
          groups.forEach((group) => {
            const gStep = Number(group.getAttribute("data-step"));
            group.style.display = gStep === step ? "" : "none";
          });

          stepIndicator.textContent = `Step ${step} / ${TOTAL_STEPS}`;
          statStep.textContent = `${step} / ${TOTAL_STEPS}`;
          currentStepLabel.textContent = String(step);
          stepDescription.textContent = stepDescriptions[step];

          prevStepButton.disabled = step === 1;
          const isLast = step === TOTAL_STEPS;
          nextStepLabel.textContent = isLast ? "ì €ì¥ ë° í…ŒìŠ¤íŠ¸ ì‹œì‘" : "ë‹¤ìŒ ë‹¨ê³„";
          nextStepSub.textContent = isLast ? "Save & Start Test" : `Move to step ${step + 1}`;
          stepHint.textContent = isLast
            ? "ì…ë ¥ ë‚´ìš©ì„ í™•ì¸í•œ ë’¤ ì €ì¥ ë° í…ŒìŠ¤íŠ¸ ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”."
            : "ë‹¤ìŒ ë²„íŠ¼ ë˜ëŠ” Enterë¡œ ë‹¨ê³„ë³„ë¡œ ì´ë™í•˜ì„¸ìš”.";

          const dots = document.querySelectorAll(".stepper-dot");
          dots.forEach((dot) => {
            const dotStep = Number(dot.getAttribute("data-step-dot"));
            dot.dataset.active = dotStep === step ? "true" : "false";
          });

          updateSummary();
          if (currentStep === 2) handleDisabilitySelectionChange();
        }

        function getFormValues() {
          const data = new FormData(form);
          const obj = {};
          data.forEach((value, key) => {
            obj[key] = String(value).trim();
          });
          const selected = getSelectedDisabilities();
          if (selected.length > 0) {
            obj.disabilityTypes = selected;
            obj.disabilityType = selected[0];
          }
          return obj;
        }

        function getSelectedDisabilities() {
          const checked = form.querySelectorAll(
            'input[name="disabilityType"]:checked'
          );
          return Array.from(checked).map((el) => el.value);
        }

        function updateSummary() {
          const values = getFormValues();

          const hasAnyValue = Object.values(values).some(
            (val) => val && String(val).trim().length > 0
          );

          if (!hasAnyValue) {
            summaryUser.textContent =
              "ê° ë‹¨ê³„ë¥¼ ì±„ìš°ë©´ ì´ ì˜ì—­ì— í•µì‹¬ ì •ë³´ê°€ ìš”ì•½ë©ë‹ˆë‹¤.";
            summaryUser.classList.add("summary-empty");
            return;
          }

          summaryUser.classList.remove("summary-empty");

          const pills = [];
          if (values.userId) {
            pills.push(pillHtml("ID", values.userId));
          }
          if (values.gender) {
            pills.push(pillHtml("ì„±ë³„", values.gender));
          }
          if (values.ageRange) {
            pills.push(pillHtml("ì—°ë ¹ëŒ€", values.ageRange));
          }
          if (values.reliability) {
            pills.push(pillHtml("ì‹ ë¢°ë„", values.reliability));
          }
          if (values.disabilityTypes && values.disabilityTypes.length > 0) {
            pills.push(
              pillHtml(
                "ì¥ì• ",
                values.disabilityTypes.join(", "),
                true
              )
            );
          }
          if (values.platform) {
            pills.push(pillHtml("í”Œë«í¼", values.platform));
          }
          if (values.inputDevice) {
            pills.push(pillHtml("ì…ë ¥ì¥ì¹˜", values.inputDevice));
          }
          if (values.pcResolution) {
            pills.push(pillHtml("í•´ìƒë„", values.pcResolution));
          }
          if (values.windowsDpi) {
            pills.push(pillHtml("ë°°ìœ¨", values.windowsDpi));
          }
          if (values.monitorSizeInch) {
            pills.push(pillHtml("ëª¨ë‹ˆí„°", values.monitorSizeInch + "ì¸ì¹˜"));
          }
          if (values.viewingDistance) {
            pills.push(pillHtml("ì‹œì²­ ê±°ë¦¬", values.viewingDistance + " cm"));
          }
          if (values.cpuSpec) {
            pills.push(pillHtml("CPU", values.cpuSpec));
          }
          if (values.gpuSpec) {
            pills.push(pillHtml("GPU", values.gpuSpec));
          }
          if (values.genre) {
            pills.push(pillHtml("ì¥ë¥´", values.genre));
          }
          if (values.gameTitle) {
            pills.push(pillHtml("ê²Œì„", values.gameTitle));
          }
          if (values.skillTier) {
            pills.push(pillHtml("ìˆ™ë ¨ë„", values.skillTier));
          }

          summaryUser.innerHTML = pills.join(" ");
        }

        function pillHtml(label, value, emphasize) {
          const safeLabel = escapeHtml(label);
          const safeValue = escapeHtml(value);
          const extraClass = emphasize ? " summary-pill-disability" : "";
          return (
            '<span class="summary-pill' +
            extraClass +
            '"><span>' +
            safeLabel +
            "</span><span>" +
            safeValue +
            "</span></span>"
          );
        }

        function escapeHtml(str) {
          return String(str)
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&#039;");
        }

        function clearStepErrors(step) {
          const group = form.querySelector(`.field-group[data-step="${step}"]`);
          if (!group) return;
          const errors = group.querySelectorAll(".error-text");
          errors.forEach((el) => {
            el.textContent = "";
          });
        }

        function validateStep(step) {
          clearStepErrors(step);
          let valid = true;

          if (step === 1) {
            const userId = document.getElementById("user-id");
            const gender = document.getElementById("gender");
            const ageRange = document.getElementById("age-range");
            const reliability = document.getElementById("reliability");

            if (!userId || !userId.value.trim()) {
              (document.getElementById("user-id-error") || {}).textContent =
                "ì„¸ì…˜/ì°¸ê°€ì IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.";
              valid = false;
            }
            if (!gender.value.trim()) {
              document.getElementById("gender-error").textContent =
                "ì„±ë³„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
              valid = false;
            }
            if (!ageRange.value.trim()) {
              document.getElementById("age-error").textContent =
                "ì—°ë ¹ëŒ€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.";
              valid = false;
            }
            if (!reliability.value.trim()) {
              document.getElementById("reliability-error").textContent =
                "ì •ë³´ ì‹ ë¢°ë„ë¥¼ ìƒ/ì¤‘/í•˜ ë“±ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.";
              valid = false;
            }
          } else if (step === 2) {
            const selected = getSelectedDisabilities();
            if (selected.length === 0) {
              disabilityError.textContent = "ì£¼ìš” ì¥ì•  ìœ í˜•ì„ 1ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”.";
              valid = false;
            }
            if (!disabilityDetail.value.trim()) {
              disabilityDetailError.textContent =
                "ì„ íƒí•œ ì¥ì•  ìœ í˜•ì˜ ê°€ë™ ë²”ìœ„, ì–‘ìƒ ë“±ì„ ê°„ë‹¨íˆ ì‘ì„±í•´ì£¼ì„¸ìš”.";
              valid = false;
            }
          } else if (step === 3) {
            const platform = document.getElementById("platform");
            const inputDevice = document.getElementById("input-device");

            if (!platform.value.trim()) {
              document.getElementById("platform-error").textContent =
                "í”Œë ˆì´ í”Œë«í¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
              valid = false;
            }
            if (!inputDevice.value.trim()) {
              document.getElementById("input-device-error").textContent =
                "ì…ë ¥ì¥ì¹˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.";
              valid = false;
            }
          } else if (step === 4) {
            ["pc-resolution-error", "windows-dpi-error", "monitor-size-inch-error", "cpu-spec-error", "gpu-spec-error"].forEach(function (id) {
              const el = document.getElementById(id);
              if (el) el.textContent = "";
            });
            const pcResolution = document.getElementById("pc-resolution");
            const windowsDpi = document.getElementById("windows-dpi");
            const cpuSpec = document.getElementById("cpu-spec");
            const gpuSpec = document.getElementById("gpu-spec");

            if (!pcResolution.value.trim()) {
              document.getElementById("pc-resolution-error").textContent =
                "ëª¨ë‹ˆí„° í•´ìƒë„ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ìë™ ê°ì§€ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.";
              valid = false;
            }
            if (!windowsDpi.value.trim()) {
              document.getElementById("windows-dpi-error").textContent =
                "ìœˆë„ìš°(ë˜ëŠ” OS) ë””ìŠ¤í”Œë ˆì´ ë°°ìœ¨(DPI)ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
              valid = false;
            }
            const monitorSizeEl = document.getElementById("monitor-size-inch");
            if (!monitorSizeEl || !monitorSizeEl.value.trim()) {
              const errEl = document.getElementById("monitor-size-inch-error");
              if (errEl) errEl.textContent = "ëª¨ë‹ˆí„° í¬ê¸°(ì¸ì¹˜)ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.";
              valid = false;
            }
            if (!cpuSpec.value.trim()) {
              document.getElementById("cpu-spec-error").textContent =
                "CPU ëª¨ë¸ëª…ì„ ê°„ë‹¨íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.";
              valid = false;
            }
            if (!gpuSpec.value.trim()) {
              document.getElementById("gpu-spec-error").textContent =
                "GPU ëª¨ë¸ëª…ì„ ê°„ë‹¨íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.";
              valid = false;
            }
          } else if (step === 5) {
            const requiredIds = [
              "genre",
              "game-title",
              "skill-tier",
              "playtime",
              "spending",
            ];
            const messages = {
              genre: "ì£¼ í”Œë ˆì´ ì¥ë¥´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.",
              "game-title": "ì£¼ìš” ê²Œì„ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.",
              "skill-tier": "ìˆ™ë ¨ë„(í‹°ì–´)ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.",
              playtime: "ëˆ„ì  í”Œë ˆì´ ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.",
              spending: "ê³¼ê¸ˆ ê·œëª¨ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.",
            };

            requiredIds.forEach((id) => {
              const input = document.getElementById(id);
              if (!input.value.trim()) {
                const errorEl = document.getElementById(id + "-error");
                if (errorEl) {
                  errorEl.textContent = messages[id];
                }
                valid = false;
              }
            });
          }

          return valid;
        }

        function handleDisabilitySelectionChange() {
          const selected = getSelectedDisabilities();
          const chips = disabilityContainer.querySelectorAll(".chip");
          chips.forEach((chip) => {
            const v = chip.getAttribute("data-disability");
            chip.dataset.selected = selected.indexOf(v) !== -1 ? "true" : "false";
          });

          if (selected.length === 0) {
            disabilityDetailHint.textContent =
              "ì„ íƒí•œ ì¥ì•  ìœ í˜•ì— ë§ì¶° ì£¼ìš” íŠ¹ì§•ì„ ê¸°ì…í•´ì£¼ì„¸ìš”.";
            disabilityDetail.placeholder = "ì˜ˆ: ì„ íƒí•œ ìœ í˜•ë³„ë¡œ ì£¼ìš” íŠ¹ì§•ì„ ê¸°ì…í•´ì£¼ì„¸ìš”.";
            return;
          }

          const hints = selected.map((v) => disabilityHints[v] || "").filter(Boolean);
          disabilityDetailHint.textContent =
            hints.length > 0
              ? hints.join(" / ")
              : "ì„ íƒí•œ ì¥ì•  ìœ í˜•ì— ë§ì¶° ì£¼ìš” íŠ¹ì§•ì„ ê¸°ì…í•´ì£¼ì„¸ìš”.";

          if (!disabilityDetail.value.trim()) {
            const placeholders = {
              ìš´ë™: "ì˜ˆ: ì˜¤ë¥¸ì† ê°€ë™ ë²”ìœ„ ì œí•œ, ì†ë–¨ë¦¼, ì¥ì‹œê°„ ë²„íŠ¼ ì—°íƒ€ ì–´ë ¤ì›€ ë“±",
              ì‹œê°: "ì˜ˆ: ì €ì‹œë ¥, ì‘ì€ UI ì¸ì§€ ì–´ë ¤ì›€, ìƒ‰ìƒ êµ¬ë¶„ ê³¤ë€ ë“±",
              ì²­ê°ì–¸ì–´ì¥ì• : "ì˜ˆ: ìŒì„± ëŒ€ì‚¬ ì¸ì§€ ì–´ë ¤ì›€, ë°°ê²½ìŒ ë¶„ë¦¬ ê³¤ë€ ë“±",
              ì¸ì§€: "ì˜ˆ: ë³µì¡í•œ UI ì´í•´ ì§€ì—°, ì‹¤ì‹œê°„ ì •ë³´ëŸ‰ ë§ì„ ë•Œ í”¼ë¡œ ë“±",
            };
            disabilityDetail.placeholder =
              selected.length === 1
                ? (placeholders[selected[0]] || "ì„ íƒí•œ ì¥ì•  ìœ í˜•ì˜ ì£¼ìš” íŠ¹ì§•ì„ ê¸°ì…í•´ì£¼ì„¸ìš”.")
                : "ì˜ˆ: ì„ íƒí•œ ê° ìœ í˜•(ë³µí•©)ì— í•´ë‹¹í•˜ëŠ” íŠ¹ì§•ì„ í•¨ê»˜ ê¸°ì…í•´ì£¼ì„¸ìš”.";
          }
        }

        disabilityContainer.addEventListener("click", (event) => {
          const chip = event.target.closest(".chip");
          if (!chip) return;
          const input = chip.querySelector(".chip-input");
          if (!input) return;

          input.checked = !input.checked;
          disabilityError.textContent = "";
          handleDisabilitySelectionChange();
          updateSummary();
        });

        disabilityContainer.addEventListener("keydown", (event) => {
          if (event.key === " " || event.key === "Enter") {
            const chip = event.target.closest(".chip");
            if (!chip) return;
            event.preventDefault();
            const input = chip.querySelector(".chip-input");
            if (!input) return;
            input.checked = !input.checked;
            disabilityError.textContent = "";
            handleDisabilitySelectionChange();
            updateSummary();
          }
        });

        form.addEventListener("input", () => {
          updateSummary();
        });

        const viewingDistanceEl = document.getElementById("viewing-distance");
        if (viewingDistanceEl) {
          viewingDistanceEl.addEventListener("input", function () {
            const valEl = document.getElementById("viewing-distance-value");
            if (valEl) valEl.textContent = this.value + " cm";
          });
        }

        (function initGuidePopover() {
          const GUIDE_CONTENT = {
            resolution: "<strong>í•´ìƒë„</strong><ol><li><strong>ì„¤ì • â†’ ì‹œìŠ¤í…œ â†’ ë””ìŠ¤í”Œë ˆì´</strong> â†’ ë””ìŠ¤í”Œë ˆì´ í•´ìƒë„ì—ì„œ í™•ì¸í•˜ì„¸ìš”.</li><li>Windows: í‘œì‹œ í•´ìƒë„(ì˜ˆ: 1920Ã—1080). macOS: ë””ìŠ¤í”Œë ˆì´ ì„¤ì •ì˜ í•´ìƒë„.</li><li>ë¸Œë¼ìš°ì €ì—ì„œ ìë™ ê°ì§€í•œ ê°’ì€ ë°°ìœ¨/ë…¼ë¦¬ í•´ìƒë„ë¼ ê¸°ê¸°ë§ˆë‹¤ ë‹¤ë¥´ê²Œ í•´ì„ë˜ë¯€ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li></ol>",
            dpi: "<strong>ìœˆë„ìš° ë°°ìœ¨(DPI)</strong><ol><li><strong>ì„¤ì • â†’ ì‹œìŠ¤í…œ â†’ ë””ìŠ¤í”Œë ˆì´</strong> â†’ ë°°ìœ¨ ë° ë ˆì´ì•„ì›ƒ</li><li>ã€Œí…ìŠ¤íŠ¸, ì•± ë° ê¸°íƒ€ í•­ëª©ì˜ í¬ê¸° ë³€ê²½ã€ì—ì„œ 100%, 125%, 150% ë“±ì˜ ê°’ì„ í™•ì¸í•˜ì„¸ìš”.</li></ol>",
            monitor: "<strong>ëª¨ë‹ˆí„° í¬ê¸°</strong><ol><li>ëª¨ë‹ˆí„° ë’·ë©´ ìŠ¤í‹°ì»¤, ë˜ëŠ” ì œì¡°ì‚¬ ì‚¬ì–‘ì„œì—ì„œ ëŒ€ê°ì„  ì¸ì¹˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.</li><li>ëª¨ë¸ëª…(ì˜ˆ: LG 27GP850)ìœ¼ë¡œ ê²€ìƒ‰í•´ë„ ë©ë‹ˆë‹¤.</li></ol>",
            cpu: "<strong>CPU</strong><ol><li><strong>Ctrl+Shift+Esc</strong>ë¡œ ì‘ì—… ê´€ë¦¬ì ì—´ê¸° â†’ <strong>ì„±ëŠ¥</strong> íƒ­ â†’ <strong>CPU</strong> ì„ íƒ</li><li>ìƒë‹¨ì— ëª¨ë¸ëª…(ì˜ˆ: Intel Core i5-12400)ì´ í‘œì‹œë©ë‹ˆë‹¤.</li><li>ë˜ëŠ” <strong>ì„¤ì • â†’ ì‹œìŠ¤í…œ â†’ ì •ë³´</strong>ì—ì„œ í”„ë¡œì„¸ì„œ í™•ì¸.</li></ol>",
            gpu: "<strong>GPU</strong><ol><li><strong>Ctrl+Shift+Esc</strong>ë¡œ ì‘ì—… ê´€ë¦¬ì ì—´ê¸° â†’ <strong>ì„±ëŠ¥</strong> íƒ­ â†’ <strong>GPU</strong> ì„ íƒ</li><li>ìƒë‹¨ì— ëª¨ë¸ëª…(ì˜ˆ: NVIDIA GeForce RTX 3060)ì´ í‘œì‹œë©ë‹ˆë‹¤.</li><li>ë˜ëŠ” <strong>Win+R</strong> â†’ <code>dxdiag</code> ì…ë ¥ â†’ ë””ìŠ¤í”Œë ˆì´ íƒ­ì—ì„œ í™•ì¸.</li></ol>"
          };
          let popover = document.getElementById("pc-guide-popover");
          if (!popover) {
            popover = document.createElement("div");
            popover.id = "pc-guide-popover";
            popover.className = "guide-popover";
            popover.style.display = "none";
            document.body.appendChild(popover);
          }
          function hidePopover() {
            popover.style.display = "none";
            document.removeEventListener("click", hideOnClickOutside);
            document.removeEventListener("keydown", hideOnEscape);
          }
          function hideOnClickOutside(e) {
            if (!popover.contains(e.target) && !e.target.closest(".guide-trigger")) hidePopover();
          }
          function hideOnEscape(e) {
            if (e.key === "Escape") hidePopover();
          }
          document.querySelectorAll(".guide-trigger").forEach(function(btn) {
            btn.addEventListener("click", function(e) {
              e.preventDefault();
              e.stopPropagation();
              const guide = this.getAttribute("data-guide");
              const html = GUIDE_CONTENT[guide];
              if (!html) return;
              if (popover.style.display === "block" && popover.dataset.current === guide) {
                hidePopover();
                return;
              }
              popover.innerHTML = html;
              popover.dataset.current = guide;
              const rect = this.getBoundingClientRect();
              popover.style.left = Math.min(rect.left, window.innerWidth - 340) + "px";
              popover.style.top = (rect.bottom + 8) + "px";
              popover.style.display = "block";
              setTimeout(function() {
                document.addEventListener("click", hideOnClickOutside);
                document.addEventListener("keydown", hideOnEscape);
              }, 0);
            });
          });
        })();

        function persistSession(status) {
          const values = getFormValues();
          const session = {
            ...values,
            status: status || "Draft",
            updatedAt: new Date().toISOString(),
          };
          if (typeof GAStorage !== "undefined") {
            GAStorage.writeSession(session);
          } else {
            try {
              sessionStorage.setItem("ga_current_session", JSON.stringify(session));
              localStorage.setItem("ga_current_session", JSON.stringify(session));
            } catch (e) {}
          }
          if (status === "Saved") {
            statSession.textContent = "Saved";
          } else {
            statSession.textContent = "Draft";
          }
        }

        /** ëª¨ë“  í•„ìˆ˜ ì…ë ¥ í•­ëª© ê²€ì¦ (1~5ë‹¨ê³„) */
        function validateAllSteps() {
          for (let s = 1; s <= TOTAL_STEPS; s++) {
            if (!validateStep(s)) {
              setStep(s);
              return false;
            }
          }
          return true;
        }

        /** ì„¸ì…˜ ì €ì¥ í›„ hub.htmlë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (í•„ìˆ˜ í•­ëª© ê²€ì¦ í¬í•¨) */
        function saveSessionAndRedirect() {
          if (!validateAllSteps()) {
            alert("í•„ìˆ˜ ì…ë ¥ í•­ëª©(ì„¸ì…˜ ID, ì„±ë³„, ì—°ë ¹ëŒ€, ì¥ì•  ìœ í˜• ë“±)ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
          }
          const values = getFormValues();
          const userData = {
            ...values,
            status: "Saved",
            updatedAt: new Date().toISOString(),
          };
          try {
            sessionStorage.setItem("user_data", JSON.stringify(userData));
          } catch (e) {
            alert("ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            return;
          }
          if (typeof GAStorage !== "undefined") {
            // í”„ë¡œí•„ë§Œ ê°±ì‹ , ê¸°ì¡´ ì¸¡ì • ê²°ê³¼(user_data.*_results)ëŠ” ìœ ì§€í•˜ì—¬ ì¬ì ‘ì† ì‹œì—ë„ ë°ì´í„° ë³´ì¡´
            GAStorage.writeSession(userData);
          }
          statSession.textContent = "Saved";
          location.href = "hub.html";
        }

        const restoreBtn = document.getElementById("restore-session");
        if (restoreBtn) {
          restoreBtn.addEventListener("click", function () {
            const uidInput = document.getElementById("user-id");
            const id = (uidInput && uidInput.value.trim()) || "";
            if (!id) {
              (document.getElementById("user-id-error") || {}).textContent = "ë³µêµ¬í•  ì„¸ì…˜ IDë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.";
              return;
            }
            if (typeof GAStorage !== "undefined" && GAStorage.restoreSessionById(id)) {
              const s = GAStorage.readSession();
              ["user-id", "gender", "age-range", "reliability", "platform", "input-device", "assistive-device",
               "pc-resolution", "windows-dpi", "monitor-size-inch", "viewing-distance", "cpu-spec", "gpu-spec", "game-fov", "genre", "game-title",
               "skill-tier", "playtime", "spending"].forEach(function (fid) {
                var el = document.getElementById(fid);
                var key = fid.replace(/-([a-z])/g, function (_, c) { return c.toUpperCase(); }).replace("User-id", "userId").replace("Monitor-size-inch", "monitorSizeInch");
                if (el && s[key] != null) el.value = s[key];
              });
              if (s.disabilityTypes && Array.isArray(s.disabilityTypes)) {
                s.disabilityTypes.forEach(function (val) {
                  var r = form.querySelector('input[name="disabilityType"][value="' + val + '"]');
                  if (r) r.checked = true;
                });
              } else if (s.disabilityType) {
                var r = form.querySelector('input[name="disabilityType"][value="' + s.disabilityType + '"]');
                if (r) r.checked = true;
              }
              if (s.disabilityDetail) {
                var ta = document.getElementById("disability-detail");
                if (ta) ta.value = s.disabilityDetail;
              }
              var vdEl = document.getElementById("viewing-distance");
              if (vdEl) {
                var vdValEl = document.getElementById("viewing-distance-value");
                if (vdValEl) vdValEl.textContent = vdEl.value + " cm";
              }
              (document.getElementById("user-id-error") || {}).textContent = "";
              updateSummary();
              statSession.textContent = "ë³µêµ¬ë¨";
            } else {
              (document.getElementById("user-id-error") || {}).textContent = "í•´ë‹¹ IDì˜ ì €ì¥ëœ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.";
            }
          });
        }

        nextStepButton.addEventListener("click", () => {
          if (currentStep < TOTAL_STEPS) {
            if (!validateStep(currentStep)) return;
            persistSession("Draft");
            setStep(currentStep + 1);
          } else {
            // ë§ˆì§€ë§‰ ë‹¨ê³„: ì „ì²´ ê²€ì¦ â†’ sessionStorage(user_data) ì €ì¥ â†’ hub.html ë¦¬ë‹¤ì´ë ‰íŠ¸
            saveSessionAndRedirect();
          }
        });

        prevStepButton.addEventListener("click", () => {
          if (currentStep > 1) {
            setStep(currentStep - 1);
          }
        });

        form.addEventListener("submit", (event) => {
          event.preventDefault();
        });

        setStep(1);
      })();
    </script>
  </body>
</html>
